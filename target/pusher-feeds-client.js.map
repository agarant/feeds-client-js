{"version":3,"file":"pusher-feeds-client.js","sources":["../node_modules/pusher-platform/target/pusher-platform.js","../src/utils.js","../src/feed.js","../src/constants.js","../src/token-provider.js","../src/feeds.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PusherPlatform\"] = factory();\n\telse\n\t\troot[\"PusherPlatform\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 12);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction responseToHeadersObject(headerStr) {\n    var headers = {};\n    if (!headerStr) {\n        return headers;\n    }\n    var headerPairs = headerStr.split('\\u000d\\u000a');\n    for (var i = 0; i < headerPairs.length; i++) {\n        var headerPair = headerPairs[i];\n        var index = headerPair.indexOf('\\u003a\\u0020');\n        if (index > 0) {\n            var key = headerPair.substring(0, index);\n            var val = headerPair.substring(index + 2);\n            headers[key] = val;\n        }\n    }\n    return headers;\n}\nexports.responseToHeadersObject = responseToHeadersObject;\nvar ErrorResponse = /** @class */ (function () {\n    function ErrorResponse(statusCode, headers, info) {\n        this.statusCode = statusCode;\n        this.headers = headers;\n        this.info = info;\n    }\n    ErrorResponse.fromXHR = function (xhr) {\n        return new ErrorResponse(xhr.status, responseToHeadersObject(xhr.getAllResponseHeaders()), xhr.responseText);\n    };\n    return ErrorResponse;\n}());\nexports.ErrorResponse = ErrorResponse;\nvar NetworkError = /** @class */ (function () {\n    function NetworkError(error) {\n        this.error = error;\n    }\n    return NetworkError;\n}());\nexports.NetworkError = NetworkError;\n// Follows https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState\nvar XhrReadyState;\n(function (XhrReadyState) {\n    XhrReadyState[XhrReadyState[\"UNSENT\"] = 0] = \"UNSENT\";\n    XhrReadyState[XhrReadyState[\"OPENED\"] = 1] = \"OPENED\";\n    XhrReadyState[XhrReadyState[\"HEADERS_RECEIVED\"] = 2] = \"HEADERS_RECEIVED\";\n    XhrReadyState[XhrReadyState[\"LOADING\"] = 3] = \"LOADING\";\n    XhrReadyState[XhrReadyState[\"DONE\"] = 4] = \"DONE\";\n})(XhrReadyState = exports.XhrReadyState || (exports.XhrReadyState = {}));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar network_1 = __webpack_require__(0);\nvar BaseSubscriptionState;\n(function (BaseSubscriptionState) {\n    BaseSubscriptionState[BaseSubscriptionState[\"UNOPENED\"] = 0] = \"UNOPENED\";\n    BaseSubscriptionState[BaseSubscriptionState[\"OPENING\"] = 1] = \"OPENING\";\n    BaseSubscriptionState[BaseSubscriptionState[\"OPEN\"] = 2] = \"OPEN\";\n    BaseSubscriptionState[BaseSubscriptionState[\"ENDING\"] = 3] = \"ENDING\";\n    BaseSubscriptionState[BaseSubscriptionState[\"ENDED\"] = 4] = \"ENDED\"; // called onEnd() or onError(err)\n})(BaseSubscriptionState = exports.BaseSubscriptionState || (exports.BaseSubscriptionState = {}));\nvar BaseSubscription = /** @class */ (function () {\n    function BaseSubscription(xhr, logger, onOpen, onError, onEvent, onEnd) {\n        if (onOpen === void 0) { onOpen = function (headers) { }; }\n        if (onError === void 0) { onError = function (error) { }; }\n        if (onEvent === void 0) { onEvent = function (event) { }; }\n        if (onEnd === void 0) { onEnd = function (error) { }; }\n        var _this = this;\n        this.xhr = xhr;\n        this.logger = logger;\n        this.onOpen = onOpen;\n        this.onError = onError;\n        this.onEvent = onEvent;\n        this.onEnd = onEnd;\n        this.state = BaseSubscriptionState.UNOPENED;\n        this.lastNewlineIndex = 0;\n        /******\n        Message parsing\n        ******/\n        this.gotEOS = false;\n        xhr.onreadystatechange = function () {\n            switch (_this.xhr.readyState) {\n                case network_1.XhrReadyState.UNSENT:\n                case network_1.XhrReadyState.OPENED:\n                case network_1.XhrReadyState.HEADERS_RECEIVED:\n                    _this.assertStateIsIn(BaseSubscriptionState.OPENING);\n                    break;\n                case network_1.XhrReadyState.LOADING:\n                    _this.onLoading();\n                    break;\n                case network_1.XhrReadyState.DONE:\n                    _this.onDone();\n                    break;\n            }\n        };\n        this.state = BaseSubscriptionState.OPENING;\n        this.xhr.send();\n    }\n    BaseSubscription.prototype.unsubscribe = function () {\n        this.state = BaseSubscriptionState.ENDED;\n        this.xhr.abort();\n        this.onEnd();\n    };\n    BaseSubscription.prototype.getHeaders = function () {\n        return network_1.responseToHeadersObject(this.xhr.getAllResponseHeaders());\n    };\n    BaseSubscription.prototype.onLoading = function () {\n        this.assertStateIsIn(BaseSubscriptionState.OPENING, BaseSubscriptionState.OPEN, BaseSubscriptionState.ENDING);\n        if (this.xhr.status === 200) {\n            //Check if we just transitioned to the open state\n            if (this.state === BaseSubscriptionState.OPENING) {\n                this.state = BaseSubscriptionState.OPEN;\n                this.onOpen(network_1.responseToHeadersObject(this.xhr.getAllResponseHeaders()));\n            }\n            this.assertStateIsIn(BaseSubscriptionState.OPEN);\n            var err = this.onChunk(); // might transition our state from OPEN -> ENDING\n            this.assertStateIsIn(BaseSubscriptionState.OPEN, BaseSubscriptionState.ENDING);\n            if (err) {\n                this.state = BaseSubscriptionState.ENDED;\n                if (err instanceof network_1.ErrorResponse && err.statusCode != 204) {\n                    this.onError(err);\n                }\n                // Because we abort()ed, we will get no more calls to our onreadystatechange handler,\n                // and so we will not call the event handler again.\n                // Finish with options.onError instead of the options.onEnd.\n            }\n            else {\n                // We consumed some response text, and all's fine. We expect more text.\n            }\n        }\n    };\n    BaseSubscription.prototype.onDone = function () {\n        if (this.xhr.status === 200) {\n            if (this.state === BaseSubscriptionState.OPENING) {\n                this.state = BaseSubscriptionState.OPEN;\n                this.onOpen(network_1.responseToHeadersObject(this.xhr.getAllResponseHeaders()));\n            }\n            this.assertStateIsIn(BaseSubscriptionState.OPEN, BaseSubscriptionState.ENDING);\n            var err = this.onChunk();\n            if (err) {\n                this.state = BaseSubscriptionState.ENDED;\n                if (err.statusCode === 204) {\n                    this.onEnd();\n                }\n                else {\n                    this.onError(err);\n                }\n            }\n            else if (this.state <= BaseSubscriptionState.ENDING) {\n                this.onError(new Error(\"HTTP response ended without receiving EOS message\"));\n            }\n            else {\n                // Stream ended normally.\n                this.onEnd();\n            }\n        }\n        else {\n            this.assertStateIsIn(BaseSubscriptionState.OPENING, BaseSubscriptionState.OPEN, BaseSubscriptionState.ENDED);\n            if (this.state === BaseSubscriptionState.ENDED) {\n                // We aborted the request deliberately, and called onError/onEnd elsewhere.\n                return;\n            }\n            else if (this.xhr.status === 0) {\n                this.onError(new network_1.NetworkError(\"Connection lost.\"));\n            }\n            else {\n                this.onError(network_1.ErrorResponse.fromXHR(this.xhr));\n            }\n        }\n    };\n    BaseSubscription.prototype.onChunk = function () {\n        this.assertStateIsIn(BaseSubscriptionState.OPEN);\n        var response = this.xhr.responseText;\n        var newlineIndex = response.lastIndexOf(\"\\n\");\n        if (newlineIndex > this.lastNewlineIndex) {\n            var rawEvents = response.slice(this.lastNewlineIndex, newlineIndex).split(\"\\n\");\n            this.lastNewlineIndex = newlineIndex;\n            for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n                var rawEvent = rawEvents_1[_i];\n                if (rawEvent.length === 0) {\n                    continue; // FIXME why? This should be a protocol error\n                }\n                var data = JSON.parse(rawEvent);\n                var err = this.onMessage(data);\n                if (err != null) {\n                    return err;\n                }\n            }\n        }\n    };\n    /**\n    * Calls options.onEvent 0+ times, then returns an Error or null\n    * Also asserts the message is formatted correctly and we're in an allowed state (not terminated).\n    */\n    BaseSubscription.prototype.onMessage = function (message) {\n        this.assertStateIsIn(BaseSubscriptionState.OPEN);\n        this.verifyMessage(message);\n        switch (message[0]) {\n            case 0:\n                return null;\n            case 1:\n                return this.onEventMessage(message);\n            case 255:\n                return this.onEOSMessage(message);\n            default:\n                return new Error(\"Unknown Message: \" + JSON.stringify(message));\n        }\n    };\n    // EITHER calls options.onEvent, OR returns an error\n    BaseSubscription.prototype.onEventMessage = function (eventMessage) {\n        this.assertStateIsIn(BaseSubscriptionState.OPEN);\n        if (eventMessage.length !== 4) {\n            return new Error(\"Event message has \" + eventMessage.length + \" elements (expected 4)\");\n        }\n        var _ = eventMessage[0], id = eventMessage[1], headers = eventMessage[2], body = eventMessage[3];\n        if (typeof id !== \"string\") {\n            return new Error(\"Invalid event ID in message: \" + JSON.stringify(eventMessage));\n        }\n        if (typeof headers !== \"object\" || Array.isArray(headers)) {\n            return new Error(\"Invalid event headers in message: \" + JSON.stringify(eventMessage));\n        }\n        this.onEvent({ eventId: id, headers: headers, body: body });\n    };\n    /**\n    * EOS message received. Sets subscription state to Ending and returns an error with given status code\n    * @param eosMessage final message of the subscription\n    */\n    BaseSubscription.prototype.onEOSMessage = function (eosMessage) {\n        this.assertStateIsIn(BaseSubscriptionState.OPEN);\n        if (eosMessage.length !== 4) {\n            return new Error(\"EOS message has \" + eosMessage.length + \" elements (expected 4)\");\n        }\n        var _ = eosMessage[0], statusCode = eosMessage[1], headers = eosMessage[2], info = eosMessage[3];\n        if (typeof statusCode !== \"number\") {\n            return new Error(\"Invalid EOS Status Code\");\n        }\n        if (typeof headers !== \"object\" || Array.isArray(headers)) {\n            return new Error(\"Invalid EOS ElementsHeaders\");\n        }\n        this.state = BaseSubscriptionState.ENDING;\n        return new network_1.ErrorResponse(statusCode, headers, info);\n    };\n    /******\n    Utility methods\n    ******/\n    /**\n    * Asserts whether this subscription falls in one of the expected states and logs a warning if it's not.\n    * @param validStates Array of possible states this subscription could be in.\n    */\n    BaseSubscription.prototype.assertStateIsIn = function () {\n        var _this = this;\n        var validStates = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            validStates[_i] = arguments[_i];\n        }\n        var stateIsValid = validStates.some(function (validState) { return validState === _this.state; });\n        if (!stateIsValid) {\n            var expectedStates = validStates.map(function (state) { return BaseSubscriptionState[state]; }).join(', ');\n            var actualState = BaseSubscriptionState[this.state];\n            this.logger.warn(\"Expected this.state to be one of [\" + expectedStates + \"] but it is \" + actualState);\n        }\n    };\n    /**\n    * Check if a single subscription message is in the right format.\n    * @param message The message to check.\n    * @returns null or error if the message is wrong.\n    */\n    BaseSubscription.prototype.verifyMessage = function (message) {\n        if (this.gotEOS) {\n            return new Error(\"Got another message after EOS message\");\n        }\n        if (!Array.isArray(message)) {\n            return new Error(\"Message is not an array\");\n        }\n        if (message.length < 1) {\n            return new Error(\"Message is empty array\");\n        }\n    };\n    return BaseSubscription;\n}());\nexports.BaseSubscription = BaseSubscription;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar network_1 = __webpack_require__(0);\nexports.createRetryStrategyOptionsOrDefault = function (options) {\n    var initialTimeoutMillis = options.initialTimeoutMillis || 1000;\n    var maxTimeoutMillis = options.maxTimeoutMillis || 5000;\n    var limit = -1;\n    if (options.limit != undefined && options.limit != null) {\n        limit = options.limit;\n    }\n    var increaseTimeout;\n    if (options.increaseTimeout) {\n        increaseTimeout = options.increaseTimeout;\n    }\n    else {\n        increaseTimeout = function (currentTimeout) {\n            if ((currentTimeout * 2) > maxTimeoutMillis) {\n                return maxTimeoutMillis;\n            }\n            else {\n                return currentTimeout * 2;\n            }\n        };\n    }\n    return {\n        initialTimeoutMillis: initialTimeoutMillis,\n        maxTimeoutMillis: maxTimeoutMillis,\n        limit: limit,\n        increaseTimeout: increaseTimeout\n    };\n};\nvar Retry = /** @class */ (function () {\n    function Retry(waitTimeMillis) {\n        this.waitTimeMillis = waitTimeMillis;\n    }\n    return Retry;\n}());\nexports.Retry = Retry;\nvar DoNotRetry = /** @class */ (function () {\n    function DoNotRetry(error) {\n        this.error = error;\n    }\n    return DoNotRetry;\n}());\nexports.DoNotRetry = DoNotRetry;\nvar requestMethodIsSafe = function (method) {\n    method = method.toUpperCase();\n    return method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'SUBSCRIBE';\n};\nvar RetryResolution = /** @class */ (function () {\n    function RetryResolution(options, logger, retryUnsafeRequests) {\n        this.options = options;\n        this.logger = logger;\n        this.retryUnsafeRequests = retryUnsafeRequests;\n        this.currentRetryCount = 0;\n        this.initialTimeoutMillis = options.initialTimeoutMillis;\n        this.maxTimeoutMillis = options.maxTimeoutMillis;\n        this.limit = options.limit;\n        this.increaseTimeoutFunction = options.increaseTimeout;\n        this.currentBackoffMillis = this.initialTimeoutMillis;\n    }\n    RetryResolution.prototype.attemptRetry = function (error) {\n        this.logger.verbose(this.constructor.name + \":  Error received\", error);\n        if (this.currentRetryCount >= this.limit && this.limit >= 0) {\n            this.logger.verbose(this.constructor.name + \":  Retry count is over the maximum limit: \" + this.limit);\n            return new DoNotRetry(error);\n        }\n        if (error instanceof network_1.ErrorResponse && error.headers['Retry-After']) {\n            this.logger.verbose(this.constructor.name + \":  Retry-After header is present, retrying in \" + error.headers['Retry-After']);\n            return new Retry(parseInt(error.headers['Retry-After']) * 1000);\n        }\n        if (error instanceof network_1.NetworkError || (error instanceof network_1.ErrorResponse && requestMethodIsSafe(error.headers[\"Request-Method\"])) || this.retryUnsafeRequests) {\n            return this.shouldSafeRetry(error);\n        }\n        if (error instanceof network_1.NetworkError)\n            return this.shouldSafeRetry(error);\n        this.logger.verbose(this.constructor.name + \": Error is not retryable\", error);\n        return new DoNotRetry(error);\n    };\n    RetryResolution.prototype.shouldSafeRetry = function (error) {\n        if (error instanceof network_1.NetworkError) {\n            this.logger.verbose(this.constructor.name + \": It's a Network Error, will retry\", error);\n            return new Retry(this.calulateMillisToRetry());\n        }\n        else if (error instanceof network_1.ErrorResponse) {\n            if (error.statusCode >= 500 && error.statusCode < 600) {\n                this.logger.verbose(this.constructor.name + \": Error 5xx, will retry\");\n                return new Retry(this.calulateMillisToRetry());\n            }\n        }\n        this.logger.verbose(this.constructor.name + \": Error is not retryable\", error);\n        return new DoNotRetry(error);\n    };\n    RetryResolution.prototype.calulateMillisToRetry = function () {\n        this.currentBackoffMillis = this.increaseTimeoutFunction(this.currentBackoffMillis);\n        this.logger.verbose(this.constructor.name + \": Retrying in \" + this.currentBackoffMillis + \"ms\");\n        return this.currentBackoffMillis;\n    };\n    return RetryResolution;\n}());\nexports.RetryResolution = RetryResolution;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar retrying_subscription_1 = __webpack_require__(7);\nvar resuming_subscription_1 = __webpack_require__(6);\nvar request_1 = __webpack_require__(5);\nvar subscription_1 = __webpack_require__(14);\nvar base_subscription_1 = __webpack_require__(1);\nvar token_providing_subscription_1 = __webpack_require__(8);\nvar transports_1 = __webpack_require__(9);\nvar subscribe_strategy_1 = __webpack_require__(13);\nvar BaseClient = /** @class */ (function () {\n    function BaseClient(options) {\n        var _this = this;\n        this.options = options;\n        this.xhrConstructor = function (path) {\n            return function (headers) {\n                var requestOptions = {\n                    method: \"SUBSCRIBE\",\n                    path: path,\n                    headers: headers\n                };\n                return _this.createXHR(_this.baseURL, requestOptions);\n            };\n        };\n        var host = options.host.replace(/\\/$/, '');\n        this.baseURL = (options.encrypted !== false ? \"https\" : \"http\") + \"://\" + host;\n        this.logger = options.logger;\n    }\n    BaseClient.prototype.request = function (options, tokenProvider, tokenParams) {\n        var _this = this;\n        if (tokenProvider) {\n            return tokenProvider.fetchToken(tokenParams).then(function (token) {\n                options.headers['Authorization'] = \"Bearer \" + token;\n                return request_1.executeNetworkRequest(function () { return _this.createXHR(_this.baseURL, options); }, options);\n            }).catch(function (error) {\n                console.log(error);\n            });\n        }\n        else {\n            return request_1.executeNetworkRequest(function () { return _this.createXHR(_this.baseURL, options); }, options);\n        }\n    };\n    BaseClient.prototype.subscribeResuming = function (path, headers, listeners, retryStrategyOptions, initialEventId, tokenProvider) {\n        var requestFactory = this.xhrConstructor(path);\n        listeners = subscription_1.replaceMissingListenersWithNoOps(listeners);\n        var subscribeStrategyListeners = subscribe_strategy_1.subscribeStrategyListenersFromSubscriptionListeners(listeners);\n        var subscriptionStrategy = resuming_subscription_1.createResumingStrategy(retryStrategyOptions, initialEventId, token_providing_subscription_1.createTokenProvidingStrategy(tokenProvider, transports_1.createH2TransportStrategy(requestFactory, this.logger), this.logger), this.logger);\n        var opened = false;\n        return subscriptionStrategy({\n            onOpen: function (headers) {\n                if (!opened) {\n                    opened = true;\n                    listeners.onOpen(headers);\n                }\n                listeners.onSubscribe();\n            },\n            onRetrying: subscribeStrategyListeners.onRetrying,\n            onError: subscribeStrategyListeners.onError,\n            onEvent: subscribeStrategyListeners.onEvent,\n            onEnd: subscribeStrategyListeners.onEnd\n        }, headers);\n    };\n    BaseClient.prototype.subscribeNonResuming = function (path, headers, listeners, retryStrategyOptions, tokenProvider) {\n        var _this = this;\n        var xhrFactory = this.xhrConstructor(path);\n        listeners = subscription_1.replaceMissingListenersWithNoOps(listeners);\n        var subscribeStrategyListeners = subscribe_strategy_1.subscribeStrategyListenersFromSubscriptionListeners(listeners);\n        var subscriptionConstructor = function (onOpen, onError, onEvent, onEnd, headers) { return new base_subscription_1.BaseSubscription(xhrFactory(headers), _this.logger, onOpen, onError, onEvent, onEnd); };\n        var subscriptionStrategy = retrying_subscription_1.createRetryingStrategy(retryStrategyOptions, token_providing_subscription_1.createTokenProvidingStrategy(tokenProvider, transports_1.createH2TransportStrategy(xhrFactory, this.logger), this.logger), this.logger);\n        var opened = false;\n        return subscriptionStrategy({\n            onOpen: function (headers) {\n                if (!opened) {\n                    opened = true;\n                    listeners.onOpen(headers);\n                }\n                listeners.onSubscribe();\n            },\n            onRetrying: subscribeStrategyListeners.onRetrying,\n            onError: subscribeStrategyListeners.onError,\n            onEvent: subscribeStrategyListeners.onEvent,\n            onEnd: subscribeStrategyListeners.onEnd\n        }, headers);\n    };\n    BaseClient.prototype.createXHR = function (baseURL, options) {\n        var XMLHttpRequest = window.XMLHttpRequest;\n        var xhr = new XMLHttpRequest();\n        var path = options.path.replace(/^\\/+/, \"\");\n        var endpoint = baseURL + \"/\" + path;\n        xhr.open(options.method.toUpperCase(), endpoint, true);\n        if (options.body) {\n            xhr.setRequestHeader(\"content-type\", \"application/json\");\n        }\n        if (options.jwt) {\n            xhr.setRequestHeader(\"authorization\", \"Bearer \" + options.jwt);\n        }\n        for (var key in options.headers) {\n            xhr.setRequestHeader(key, options.headers[key]);\n        }\n        return xhr;\n    };\n    return BaseClient;\n}());\nexports.BaseClient = BaseClient;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"VERBOSE\"] = 1] = \"VERBOSE\";\n    LogLevel[LogLevel[\"DEBUG\"] = 2] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 3] = \"INFO\";\n    LogLevel[LogLevel[\"WARNING\"] = 4] = \"WARNING\";\n    LogLevel[LogLevel[\"ERROR\"] = 5] = \"ERROR\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\n/**\n * Default implementation of the Logger. Wraps standards console calls.\n * Logs only calls that are at or above the threshold (verbose/debug/info/warn/error)\n * If error is passed, it will append the message to the error object.\n */\nvar ConsoleLogger = /** @class */ (function () {\n    function ConsoleLogger(threshold) {\n        if (threshold === void 0) { threshold = 2; }\n        this.threshold = threshold;\n    }\n    ConsoleLogger.prototype.log = function (logFunction, level, message, error) {\n        if (level >= this.threshold) {\n            var loggerSignature = \"Logger.\" + LogLevel[level];\n            if (error) {\n                console.group();\n                logFunction(loggerSignature + \": \" + message);\n                logFunction(error);\n                console.groupEnd();\n            }\n            else {\n                logFunction(loggerSignature + \": \" + message);\n            }\n        }\n    };\n    ConsoleLogger.prototype.verbose = function (message, error) {\n        this.log(console.log, LogLevel.VERBOSE, message, error);\n    };\n    ConsoleLogger.prototype.debug = function (message, error) {\n        this.log(console.log, LogLevel.DEBUG, message, error);\n    };\n    ConsoleLogger.prototype.info = function (message, error) {\n        this.log(console.info, LogLevel.INFO, message, error);\n    };\n    ConsoleLogger.prototype.warn = function (message, error) {\n        this.log(console.warn, LogLevel.WARNING, message, error);\n    };\n    ConsoleLogger.prototype.error = function (message, error) {\n        this.log(console.error, LogLevel.ERROR, message, error);\n    };\n    return ConsoleLogger;\n}());\nexports.ConsoleLogger = ConsoleLogger;\nvar EmptyLogger = /** @class */ (function () {\n    function EmptyLogger() {\n    }\n    EmptyLogger.prototype.verbose = function (message, error) { };\n    ;\n    EmptyLogger.prototype.debug = function (message, error) { };\n    ;\n    EmptyLogger.prototype.info = function (message, error) { };\n    ;\n    EmptyLogger.prototype.warn = function (message, error) { };\n    ;\n    EmptyLogger.prototype.error = function (message, error) { };\n    ;\n    return EmptyLogger;\n}());\nexports.EmptyLogger = EmptyLogger;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar network_1 = __webpack_require__(0);\nvar PCancelable = __webpack_require__(11);\nfunction executeNetworkRequest(createXhr, options) {\n    var cancelablePromise = new PCancelable(function (onCancel, resolve, reject) {\n        var xhr = createXhr();\n        onCancel(function () {\n            xhr.abort();\n        });\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    resolve(xhr.response);\n                }\n                else if (xhr.status !== 0) {\n                    reject(network_1.ErrorResponse.fromXHR(xhr));\n                }\n                else {\n                    reject(new network_1.NetworkError(\"No Connection\"));\n                }\n            }\n        };\n        xhr.send(JSON.stringify(options.body));\n    });\n    return cancelablePromise;\n}\nexports.executeNetworkRequest = executeNetworkRequest;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar retry_strategy_1 = __webpack_require__(2);\nvar network_1 = __webpack_require__(0);\nexports.createResumingStrategy = function (retryOptions, initialEventId, nextSubscribeStrategy, logger) {\n    retryOptions = retry_strategy_1.createRetryStrategyOptionsOrDefault(retryOptions);\n    var retryResolution = new retry_strategy_1.RetryResolution(retryOptions, logger);\n    var ResumingSubscription = /** @class */ (function () {\n        function ResumingSubscription(listeners, headers) {\n            var _this = this;\n            this.onTransition = function (newState) {\n                _this.state = newState;\n            };\n            this.unsubscribe = function () {\n                _this.state.unsubscribe();\n            };\n            var OpeningSubscriptionState = /** @class */ (function () {\n                function OpeningSubscriptionState(onTransition) {\n                    var _this = this;\n                    this.onTransition = onTransition;\n                    var lastEventId = initialEventId;\n                    logger.verbose(\"ResumingSubscription: transitioning to OpeningSubscriptionState\");\n                    if (lastEventId) {\n                        headers[\"Last-Event-Id\"] = lastEventId;\n                        logger.verbose(\"ResumingSubscription: initialEventId is \" + lastEventId);\n                    }\n                    this.underlyingSubscription = nextSubscribeStrategy({\n                        onOpen: function (headers) {\n                            onTransition(new OpenSubscriptionState(headers, _this.underlyingSubscription, onTransition));\n                        },\n                        onRetrying: listeners.onRetrying,\n                        onError: function (error) {\n                            onTransition(new ResumingSubscriptionState(error, lastEventId, onTransition));\n                        },\n                        onEvent: function (event) {\n                            lastEventId = event.eventId;\n                            listeners.onEvent(event);\n                        },\n                        onEnd: function (error) {\n                            onTransition(new EndedSubscriptionState(error));\n                        }\n                    }, headers);\n                }\n                OpeningSubscriptionState.prototype.unsubscribe = function () {\n                    this.onTransition(new EndingSubscriptionState());\n                    this.underlyingSubscription.unsubscribe();\n                };\n                return OpeningSubscriptionState;\n            }());\n            var OpenSubscriptionState = /** @class */ (function () {\n                function OpenSubscriptionState(headers, underlyingSubscription, onTransition) {\n                    this.underlyingSubscription = underlyingSubscription;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"ResumingSubscription: transitioning to OpenSubscriptionState\");\n                    listeners.onOpen(headers);\n                }\n                OpenSubscriptionState.prototype.unsubscribe = function () {\n                    this.onTransition(new EndingSubscriptionState());\n                    this.underlyingSubscription.unsubscribe();\n                };\n                return OpenSubscriptionState;\n            }());\n            var ResumingSubscriptionState = /** @class */ (function () {\n                function ResumingSubscriptionState(error, lastEventId, onTransition) {\n                    var _this = this;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"ResumingSubscription: transitioning to ResumingSubscriptionState\");\n                    var executeSubscriptionOnce = function (error, lastEventId) {\n                        listeners.onRetrying();\n                        var resolveError = function (error) {\n                            if (error instanceof network_1.ErrorResponse) {\n                                error.headers[\"Request-Method\"] = \"SUBSCRIBE\";\n                            }\n                            return retryResolution.attemptRetry(error);\n                        };\n                        var errorResolution = resolveError(error);\n                        if (errorResolution instanceof retry_strategy_1.Retry) {\n                            _this.timeout = window.setTimeout(function () { executeNextSubscribeStrategy(lastEventId); }, errorResolution.waitTimeMillis);\n                        }\n                        else {\n                            onTransition(new FailedSubscriptionState(error));\n                        }\n                    };\n                    var executeNextSubscribeStrategy = function (lastEventId) {\n                        logger.verbose(\"ResumingSubscription: trying to re-establish the subscription\");\n                        if (lastEventId) {\n                            logger.verbose(\"ResumingSubscription: lastEventId: \" + lastEventId);\n                            headers[\"Last-Event-Id\"] = lastEventId;\n                        }\n                        _this.underlyingSubscription = nextSubscribeStrategy({\n                            onOpen: function (headers) {\n                                onTransition(new OpenSubscriptionState(headers, _this.underlyingSubscription, onTransition));\n                            },\n                            onRetrying: listeners.onRetrying,\n                            onError: function (error) {\n                                executeSubscriptionOnce(error, lastEventId);\n                            },\n                            onEvent: function (event) {\n                                lastEventId = event.eventId;\n                                listeners.onEvent(event);\n                            },\n                            onEnd: function (error) {\n                                onTransition(new EndedSubscriptionState(error));\n                            },\n                        }, headers);\n                    };\n                    executeSubscriptionOnce(error, lastEventId);\n                }\n                ResumingSubscriptionState.prototype.unsubscribe = function () {\n                    this.onTransition(new EndingSubscriptionState());\n                    window.clearTimeout(this.timeout);\n                    this.underlyingSubscription.unsubscribe();\n                };\n                return ResumingSubscriptionState;\n            }());\n            var EndingSubscriptionState = /** @class */ (function () {\n                function EndingSubscriptionState(error) {\n                    logger.verbose(\"ResumingSubscription: transitioning to EndingSubscriptionState\");\n                }\n                EndingSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription is already ending\");\n                };\n                return EndingSubscriptionState;\n            }());\n            var EndedSubscriptionState = /** @class */ (function () {\n                function EndedSubscriptionState(error) {\n                    logger.verbose(\"ResumingSubscription: transitioning to EndedSubscriptionState\");\n                    listeners.onEnd(error);\n                }\n                EndedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return EndedSubscriptionState;\n            }());\n            var FailedSubscriptionState = /** @class */ (function () {\n                function FailedSubscriptionState(error) {\n                    logger.verbose(\"ResumingSubscription: transitioning to FailedSubscriptionState\", error);\n                    listeners.onError(error);\n                }\n                FailedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return FailedSubscriptionState;\n            }());\n            //Here we init the state transition shenaningans\n            this.state = new OpeningSubscriptionState(this.onTransition);\n        }\n        return ResumingSubscription;\n    }());\n    //All the magic in the world.\n    return function (listeners, headers) {\n        return new ResumingSubscription(listeners, headers);\n    };\n};\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar retry_strategy_1 = __webpack_require__(2);\nvar network_1 = __webpack_require__(0);\nexports.createRetryingStrategy = function (retryOptions, nextSubscribeStrategy, logger) {\n    retryOptions = retry_strategy_1.createRetryStrategyOptionsOrDefault(retryOptions);\n    var retryResolution = new retry_strategy_1.RetryResolution(retryOptions, logger);\n    var RetryingSubscription = /** @class */ (function () {\n        function RetryingSubscription(listeners, headers) {\n            var _this = this;\n            this.onTransition = function (newState) {\n                _this.state = newState;\n            };\n            this.unsubscribe = function () {\n                _this.state.unsubscribe();\n            };\n            var OpeningSubscriptionState = /** @class */ (function () {\n                function OpeningSubscriptionState(onTransition) {\n                    var _this = this;\n                    logger.verbose(\"RetryingSubscription: transitioning to OpeningSubscriptionState\");\n                    this.underlyingSubscription = nextSubscribeStrategy({\n                        onOpen: function (headers) { return onTransition(new OpenSubscriptionState(headers, _this.underlyingSubscription, onTransition)); },\n                        onRetrying: listeners.onRetrying,\n                        onError: function (error) { return onTransition(new RetryingSubscriptionState(error, onTransition)); },\n                        onEvent: listeners.onEvent,\n                        onEnd: function (error) { return onTransition(new EndedSubscriptionState(error)); }\n                    }, headers);\n                }\n                OpeningSubscriptionState.prototype.unsubscribe = function () {\n                    this.underlyingSubscription.unsubscribe();\n                    throw new Error(\"Method not implemented.\");\n                };\n                return OpeningSubscriptionState;\n            }());\n            var RetryingSubscriptionState = /** @class */ (function () {\n                function RetryingSubscriptionState(error, onTransition) {\n                    var _this = this;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"RetryingSubscription: transitioning to RetryingSubscriptionState\");\n                    var executeSubscriptionOnce = function (error) {\n                        listeners.onRetrying();\n                        var resolveError = function (error) {\n                            if (error instanceof network_1.ErrorResponse) {\n                                error.headers[\"Request-Method\"] = \"SUBSCRIBE\";\n                            }\n                            return retryResolution.attemptRetry(error);\n                        };\n                        var errorResolution = resolveError(error);\n                        if (errorResolution instanceof retry_strategy_1.Retry) {\n                            _this.timeout = window.setTimeout(function () {\n                                executeNextSubscribeStrategy();\n                            }, errorResolution.waitTimeMillis);\n                        }\n                        else {\n                            onTransition(new FailedSubscriptionState(error));\n                        }\n                    };\n                    var executeNextSubscribeStrategy = function () {\n                        logger.verbose(\"RetryingSubscription: trying to re-establish the subscription\");\n                        var underlyingSubscription = nextSubscribeStrategy({\n                            onOpen: function (headers) { return onTransition(new OpenSubscriptionState(headers, underlyingSubscription, onTransition)); },\n                            onRetrying: listeners.onRetrying,\n                            onError: function (error) { return executeSubscriptionOnce(error); },\n                            onEvent: listeners.onEvent,\n                            onEnd: function (error) { return onTransition(new EndedSubscriptionState(error)); }\n                        }, headers);\n                    };\n                    executeSubscriptionOnce(error);\n                }\n                RetryingSubscriptionState.prototype.unsubscribe = function () {\n                    window.clearTimeout(this.timeout);\n                    this.onTransition(new EndedSubscriptionState());\n                };\n                return RetryingSubscriptionState;\n            }());\n            var OpenSubscriptionState = /** @class */ (function () {\n                function OpenSubscriptionState(headers, underlyingSubscription, onTransition) {\n                    this.underlyingSubscription = underlyingSubscription;\n                    this.onTransition = onTransition;\n                    listeners.onOpen(headers);\n                    logger.verbose(\"RetryingSubscription: transitioning to OpenSubscriptionState\");\n                }\n                OpenSubscriptionState.prototype.unsubscribe = function () {\n                    this.underlyingSubscription.unsubscribe();\n                    this.onTransition(new EndedSubscriptionState());\n                };\n                return OpenSubscriptionState;\n            }());\n            var EndedSubscriptionState = /** @class */ (function () {\n                function EndedSubscriptionState(error) {\n                    logger.verbose(\"RetryingSubscription: transitioning to EndedSubscriptionState\");\n                    listeners.onEnd(error);\n                }\n                EndedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return EndedSubscriptionState;\n            }());\n            var FailedSubscriptionState = /** @class */ (function () {\n                function FailedSubscriptionState(error) {\n                    logger.verbose(\"RetryingSubscription: transitioning to FailedSubscriptionState\", error);\n                    listeners.onError(error);\n                }\n                FailedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return FailedSubscriptionState;\n            }());\n            this.state = new OpeningSubscriptionState(this.onTransition);\n        }\n        return RetryingSubscription;\n    }());\n    return function (listeners, headers) { return new RetryingSubscription(listeners, headers); };\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar network_1 = __webpack_require__(0);\nexports.createTokenProvidingStrategy = function (tokenProvider, nextSubscribeStrategy, logger) {\n    var TokenProvidingSubscription = /** @class */ (function () {\n        function TokenProvidingSubscription(listeners, headers) {\n            var _this = this;\n            this.onTransition = function (newState) {\n                _this.state = newState;\n            };\n            this.unsubscribe = function () {\n                _this.state.unsubscribe();\n            };\n            var TokenProvidingState = /** @class */ (function () {\n                function TokenProvidingState(onTransition) {\n                    var _this = this;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"TokenProvidingSubscription: transitioning to TokenProvidingState\");\n                    var isTokenExpiredError = function (error) {\n                        return (error instanceof network_1.ErrorResponse &&\n                            error.statusCode === 401 &&\n                            error.info === \"authentication/expired\");\n                    };\n                    var fetchTokenAndExecuteSubscription = function () {\n                        _this.tokenPromise = tokenProvider.fetchToken()\n                            .then(function (token) {\n                            _this.putTokenIntoHeader(token);\n                            _this.underlyingSubscription = nextSubscribeStrategy({\n                                onOpen: function (headers) {\n                                    onTransition(new OpenSubscriptionState(headers, _this.underlyingSubscription, onTransition));\n                                },\n                                onRetrying: listeners.onRetrying,\n                                onError: function (error) {\n                                    if (isTokenExpiredError(error)) {\n                                        tokenProvider.clearToken(token);\n                                        fetchTokenAndExecuteSubscription();\n                                    }\n                                    else {\n                                        onTransition(new FailedSubscriptionState(error));\n                                    }\n                                },\n                                onEvent: listeners.onEvent,\n                                onEnd: function (error) {\n                                    onTransition(new EndedSubscriptionState(error));\n                                }\n                            }, headers);\n                        })\n                            .catch(function (error) {\n                            (function (error) {\n                                onTransition(new FailedSubscriptionState(error));\n                            });\n                        });\n                    };\n                    fetchTokenAndExecuteSubscription();\n                }\n                TokenProvidingState.prototype.unsubscribe = function () {\n                    if (this.tokenPromise)\n                        this.tokenPromise.cancel();\n                    this.underlyingSubscription.unsubscribe();\n                    this.onTransition(new EndedSubscriptionState());\n                };\n                TokenProvidingState.prototype.putTokenIntoHeader = function (token) {\n                    if (token) {\n                        headers['Authorization'] = \"Bearer \" + token;\n                        logger.verbose(\"TokenProvidingSubscription: token fetched: \" + token);\n                    }\n                };\n                return TokenProvidingState;\n            }());\n            var OpenSubscriptionState = /** @class */ (function () {\n                function OpenSubscriptionState(headers, underlyingSubscription, onTransition) {\n                    this.underlyingSubscription = underlyingSubscription;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"TokenProvidingSubscription: transitioning to OpenSubscriptionState\");\n                    listeners.onOpen(headers);\n                }\n                OpenSubscriptionState.prototype.unsubscribe = function () {\n                    this.underlyingSubscription.unsubscribe();\n                    this.onTransition(new EndedSubscriptionState());\n                };\n                return OpenSubscriptionState;\n            }());\n            var FailedSubscriptionState = /** @class */ (function () {\n                function FailedSubscriptionState(error) {\n                    logger.verbose(\"TokenProvidingSubscription: transitioning to FailedSubscriptionState\", error);\n                    listeners.onError(error);\n                }\n                FailedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return FailedSubscriptionState;\n            }());\n            var EndedSubscriptionState = /** @class */ (function () {\n                function EndedSubscriptionState(error) {\n                    logger.verbose(\"TokenProvidingSubscription: transitioning to EndedSubscriptionState\");\n                    listeners.onEnd(error);\n                }\n                EndedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return EndedSubscriptionState;\n            }());\n            this.state = new TokenProvidingState(this.onTransition);\n        }\n        return TokenProvidingSubscription;\n    }());\n    //Token provider might not be there. If missing, go straight to the underlying subscribe strategy\n    if (tokenProvider) {\n        return function (listeners, headers) { return new TokenProvidingSubscription(listeners, headers); };\n    }\n    else {\n        return function (listeners, headers) {\n            return nextSubscribeStrategy(listeners, headers);\n        };\n    }\n};\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_subscription_1 = __webpack_require__(1);\nexports.createH2TransportStrategy = function (requestFactory, logger) {\n    var strategy = function (listeners, headers) {\n        return new base_subscription_1.BaseSubscription(requestFactory(headers), logger, listeners.onOpen, listeners.onError, listeners.onEvent, listeners.onEnd);\n    };\n    return strategy;\n};\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_client_1 = __webpack_require__(3);\nvar logger_1 = __webpack_require__(4);\nvar HOST_BASE = \"pusherplatform.io\";\nvar Instance = /** @class */ (function () {\n    function Instance(options) {\n        if (!options.instanceId)\n            throw new Error('Expected `instanceId` property in Instance options!');\n        if (options.instanceId.split(\":\").length !== 3)\n            throw new Error('The instance property is in the wrong format!');\n        if (!options.serviceName)\n            throw new Error('Expected `serviceName` property in Instance options!');\n        if (!options.serviceVersion)\n            throw new Error('Expected `serviceVersion` property in Instance otpions!');\n        var splitInstance = options.instanceId.split(\":\");\n        this.platformVersion = splitInstance[0];\n        this.cluster = splitInstance[1];\n        this.id = splitInstance[2];\n        this.serviceName = options.serviceName;\n        this.serviceVersion = options.serviceVersion;\n        this.host = options.host || this.cluster + \".\" + HOST_BASE;\n        this.logger = options.logger || new logger_1.ConsoleLogger();\n        this.client = options.client || new base_client_1.BaseClient({\n            encrypted: options.encrypted,\n            host: this.host,\n            logger: this.logger\n        });\n    }\n    Instance.prototype.request = function (options, tokenProvider, tokenParams) {\n        options.path = this.absPath(options.path);\n        if (options.headers == null || options.headers == undefined) {\n            options.headers = {};\n        }\n        return this.client.request(options, tokenProvider, tokenParams);\n    };\n    Instance.prototype.subscribeNonResuming = function (options) {\n        var headers = options.headers || {};\n        var retryStrategyOptions = options.retryStrategyOptions || {};\n        var tokenProvider = options.tokenProvider;\n        return this.client.subscribeNonResuming(this.absPath(options.path), headers, options.listeners, retryStrategyOptions, tokenProvider);\n    };\n    Instance.prototype.subscribeResuming = function (options) {\n        var headers = options.headers || {};\n        var retryStrategyOptions = options.retryStrategyOptions || {};\n        var tokenProvider = options.tokenProvider;\n        return this.client.subscribeResuming(this.absPath(options.path), headers, options.listeners, retryStrategyOptions, options.initialEventId, tokenProvider);\n    };\n    Instance.prototype.absPath = function (relativePath) {\n        return (\"/services/\" + this.serviceName + \"/\" + this.serviceVersion + \"/\" + this.id + \"/\" + relativePath).replace(/\\/+/g, \"/\").replace(/\\/+$/, \"\");\n    };\n    return Instance;\n}());\nexports.default = Instance;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nclass CancelError extends Error {\n\tconstructor() {\n\t\tsuper('Promise was canceled');\n\t\tthis.name = 'CancelError';\n\t}\n}\n\nclass PCancelable {\n\tstatic fn(fn) {\n\t\treturn function () {\n\t\t\tconst args = [].slice.apply(arguments);\n\t\t\treturn new PCancelable((onCancel, resolve, reject) => {\n\t\t\t\targs.unshift(onCancel);\n\t\t\t\tfn.apply(null, args).then(resolve, reject);\n\t\t\t});\n\t\t};\n\t}\n\n\tconstructor(executor) {\n\t\tthis._pending = true;\n\t\tthis._canceled = false;\n\n\t\tthis._promise = new Promise((resolve, reject) => {\n\t\t\tthis._reject = reject;\n\n\t\t\treturn executor(\n\t\t\t\tfn => {\n\t\t\t\t\tthis._cancel = fn;\n\t\t\t\t},\n\t\t\t\tval => {\n\t\t\t\t\tthis._pending = false;\n\t\t\t\t\tresolve(val);\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\tthis._pending = false;\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tthen() {\n\t\treturn this._promise.then.apply(this._promise, arguments);\n\t}\n\n\tcatch() {\n\t\treturn this._promise.catch.apply(this._promise, arguments);\n\t}\n\n\tcancel() {\n\t\tif (!this._pending || this._canceled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof this._cancel === 'function') {\n\t\t\ttry {\n\t\t\t\tthis._cancel();\n\t\t\t} catch (err) {\n\t\t\t\tthis._reject(err);\n\t\t\t}\n\t\t}\n\n\t\tthis._canceled = true;\n\t\tthis._reject(new CancelError());\n\t}\n\n\tget canceled() {\n\t\treturn this._canceled;\n\t}\n}\n\nObject.setPrototypeOf(PCancelable.prototype, Promise.prototype);\n\nmodule.exports = PCancelable;\nmodule.exports.CancelError = CancelError;\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar transports_1 = __webpack_require__(9);\nexports.createH2TransportStrategy = transports_1.createH2TransportStrategy;\nvar request_1 = __webpack_require__(5);\nexports.executeNetworkRequest = request_1.executeNetworkRequest;\nvar resuming_subscription_1 = __webpack_require__(6);\nexports.createResumingStrategy = resuming_subscription_1.createResumingStrategy;\nvar retry_strategy_1 = __webpack_require__(2);\nexports.createRetryStrategyOptionsOrDefault = retry_strategy_1.createRetryStrategyOptionsOrDefault;\nexports.DoNotRetry = retry_strategy_1.DoNotRetry;\nexports.Retry = retry_strategy_1.Retry;\nexports.RetryResolution = retry_strategy_1.RetryResolution;\nvar instance_1 = __webpack_require__(10);\nexports.Instance = instance_1.default;\nvar base_client_1 = __webpack_require__(3);\nexports.BaseClient = base_client_1.BaseClient;\nvar logger_1 = __webpack_require__(4);\nexports.ConsoleLogger = logger_1.ConsoleLogger;\nexports.EmptyLogger = logger_1.EmptyLogger;\nvar retrying_subscription_1 = __webpack_require__(7);\nexports.createRetryingStrategy = retrying_subscription_1.createRetryingStrategy;\nvar token_providing_subscription_1 = __webpack_require__(8);\nexports.createTokenProvidingStrategy = token_providing_subscription_1.createTokenProvidingStrategy;\nvar base_subscription_1 = __webpack_require__(1);\nexports.BaseSubscription = base_subscription_1.BaseSubscription;\nexports.BaseSubscriptionState = base_subscription_1.BaseSubscriptionState;\nvar network_1 = __webpack_require__(0);\nexports.ErrorResponse = network_1.ErrorResponse;\nexports.NetworkError = network_1.NetworkError;\nexports.responseToHeadersObject = network_1.responseToHeadersObject;\nexports.XhrReadyState = network_1.XhrReadyState;\nexports.default = {\n    Instance: instance_1.default,\n    BaseClient: base_client_1.BaseClient,\n    ConsoleLogger: logger_1.ConsoleLogger, EmptyLogger: logger_1.EmptyLogger,\n};\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.subscribeStrategyListenersFromSubscriptionListeners = function (subListeners) {\n    return {\n        onOpen: subListeners.onOpen,\n        onRetrying: subListeners.onRetrying,\n        onError: subListeners.onError,\n        onEvent: subListeners.onEvent,\n        onEnd: subListeners.onEnd\n    };\n};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//Move this util somewhere else?\nvar noop = function (arg) { };\nexports.replaceMissingListenersWithNoOps = function (listeners) {\n    var onOpen = listeners.onOpen || noop;\n    var onSubscribe = listeners.onSubscribe || noop;\n    var onEvent = listeners.onEvent || noop;\n    var onError = listeners.onError || noop;\n    var onEnd = listeners.onEnd || noop;\n    var onRetrying = listeners.onRetrying || noop;\n    return {\n        onOpen: onOpen,\n        onSubscribe: onSubscribe,\n        onRetrying: onRetrying,\n        onEvent: onEvent,\n        onError: onError,\n        onEnd: onEnd\n    };\n};\n\n\n/***/ })\n/******/ ]);\n});","export function parseResponse(promise) {\n  return new Promise((resolve, reject) => {\n    promise.then(response => {\n      try {\n        resolve(JSON.parse(response));\n      } catch (err) {\n        reject(err);\n      }\n    }).catch(reject);\n  });\n}\n\nexport function urlEncode(data) {\n  return Object.keys(data)\n    .filter(key => data[key] !== undefined)\n    .map(key => `${ key }=${ encodeURIComponent(data[key]) }`)\n    .join(\"&\");\n}\n\nexport function queryString(data) {\n  const encodedData = urlEncode(data);\n  return encodedData ? `?${ encodedData }` : \"\";\n}\n\nexport function unixTimeNow() {\n  return Math.floor(Date.now() / 1000);\n}\n","import { parseResponse, queryString } from \"./utils\";\n\nexport default class Feed {\n  constructor({ instance, feedId, readTokenProvider }) {\n    this.instance = instance;\n    this.feedId = feedId;\n    this.readTokenProvider = readTokenProvider;\n  }\n\n  subscribe({ onOpen, onItem, ...options } = {}) {\n    if (onOpen && typeof onOpen !== \"function\") {\n      throw new TypeError(`onOpen must be a function, got ${ onOpen }`);\n    }\n    if (typeof onItem !== \"function\") {\n      throw new TypeError(\"Must provide an `onItem` callback\");\n    }\n    const onEvent = event => {\n      if (event.body.type === 0 && onOpen) {\n        onOpen(event.body.data);\n      } else if (event.body.type === 1 && onItem) {\n        onItem(event.body.data);\n      } else if (event.body.type > 1) {\n        throw new TypeError(`Unsupported event type '${\n          event.body.type\n        }'`);\n      }\n    };\n    return this.instance.subscribeResuming({\n      ...options,\n      // Mapping our itemId to platform library eventId\n      initialEventId: options.lastItemId,\n      path: `feeds/${ this.feedId }/items` + queryString({\n        previous_items: options.previousItems,\n      }),\n      tokenProvider: this.readTokenProvider,\n      listeners: {\n        onEvent,\n        onSubscribe: options.onSubscribe,\n        onRetrying: options.onRetrying,\n        onError: options.onError,\n        onEnd: options.onEnd,\n      }\n    });\n  }\n\n  paginate({ cursor, limit = 50 } = {}) {\n    return parseResponse(this.instance.request({\n      method: \"GET\",\n      path: `feeds/${ this.feedId }/items` + queryString({\n        cursor,\n        limit,\n      }),\n    }, this.readTokenProvider));\n  }\n}\n","export const cacheExpiryTolerance = 10 * 60; // 10 minutes (in seconds)\nexport const feedIdRegex = /^[a-zA-Z0-9-]+$/;\nexport const tokenProviderTimeout = 30 * 1000; // 30 seconds (in ms)\n","import {\n  cacheExpiryTolerance,\n  tokenProviderTimeout,\n} from \"./constants\";\n\nimport { urlEncode, unixTimeNow } from \"./utils\";\n\nexport default class TokenProvider {\n  constructor({ authEndpoint, authData }) {\n    this.authEndpoint = authEndpoint;\n    this.authData = authData;\n  }\n\n  fetchToken() {\n    if (this.cacheIsStale) {\n      return this.makeAuthRequest().then(responseBody => {\n        this.cache(responseBody.access_token, responseBody.expires_in);\n        return this.cachedToken;\n      });\n    }\n    return Promise.resolve(this.cachedToken);\n  }\n\n  get cacheIsStale() {\n    return !this.cachedToken || unixTimeNow() > this.cacheValidUntil;\n  }\n\n  cache(token, expiresIn) {\n    this.cachedToken = token;\n    this.cacheValidUntil = unixTimeNow() + expiresIn - cacheExpiryTolerance;\n  }\n\n  makeAuthRequest() {\n    if (typeof this.authEndpoint != \"string\") {\n      throw new TypeError(`Expected authEndpoint to be a string, but got ${this.authEndpoint}. Please provide an authEndpoint to access private feeds. (See http://docs.pusher.com/feeds/concepts/private-feeds/)`);\n    }\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open(\"POST\", this.authEndpoint);\n      xhr.timeout = tokenProviderTimeout;\n      xhr.onload = () => {\n        if (xhr.status === 200) {\n          resolve(JSON.parse(xhr.responseText));\n        } else {\n          reject(new Error(`Couldn't fetch token from ${\n            this.authEndpoint\n          }; got ${ xhr.status } ${ xhr.statusText }.`));\n        }\n      };\n      xhr.ontimeout = () => {\n        reject(new Error(`Request timed out while fetching token from ${\n          this.authEndpoint\n        }`));\n      };\n      xhr.setRequestHeader(\"content-type\", \"application/x-www-form-urlencoded\");\n      xhr.send(urlEncode({\n        ...this.authData,\n        grant_type: \"client_credentials\",\n      }));\n    });\n  }\n}\n","import PusherPlatform from \"pusher-platform\";\nimport Feed from \"./feed\";\nimport TokenProvider from \"./token-provider\";\nimport { feedIdRegex } from \"./constants\";\nimport { parseResponse, queryString } from \"./utils\";\n\nexport default class Feeds {\n  constructor({\n    authData = {},\n    authEndpoint,\n    host,\n    instanceId,\n    logLevel,\n    logger,\n  } = {}) {\n    this.authData = authData;\n    this.authEndpoint = authEndpoint;\n    this.listTokenProvider = new TokenProvider({\n      authEndpoint: this.authEndpoint,\n      authData: {\n        ...this.authData,\n        path: \"feeds\",\n        action: \"READ\",\n      }\n    });\n    this.firehoseTokenProvider = new TokenProvider({\n      authEndpoint: this.authEndpoint,\n      authData: {\n        ...this.authData,\n        path: \"firehose/items\",\n        action: \"READ\",\n      }\n    });\n    if (!logger && logLevel) {\n      logger = new PusherPlatform.ConsoleLogger(logLevel);\n    }\n    this.instance = new PusherPlatform.Instance({\n      host,\n      instanceId,\n      logger,\n      serviceName: \"feeds\",\n      serviceVersion: \"v1\",\n    });\n  }\n\n  list({ prefix, limit } = {}) {\n    return parseResponse(this.instance.request({\n      method: \"GET\",\n      path: \"feeds\" + queryString({ prefix, limit }),\n    }, this.listTokenProvider));\n  }\n\n  feed(feedId) {\n    if (!feedId || !feedId.match(feedIdRegex)) {\n      throw new TypeError(`Invalid feedId: ${ feedId }`);\n    }\n    const readTokenProvider = feedId.startsWith(\"private-\") ? new TokenProvider({\n      authEndpoint: this.authEndpoint,\n      authData: {\n        ...this.authData,\n        path: `feeds/${ feedId }/items`,\n        action: \"READ\",\n      }\n    }) : null;\n    return new Feed({\n      instance: this.instance,\n      feedId,\n      readTokenProvider,\n    });\n  }\n\n  firehose({ onPublish, onSubscribe, onUnsubscribe, ...options } = {}) {\n    validateFirehoseCallbacks({ onPublish, onSubscribe, onUnsubscribe });\n    const onEvent = event => {\n      if (event.body.type === 0 && onPublish) {\n        onPublish(event.body.data);\n      } else if (event.body.type === 1 && onSubscribe) {\n        onSubscribe(event.body.data);\n      } else if (event.body.type === 2 && onUnsubscribe) {\n        onUnsubscribe(event.body.data);\n      } else if (event.body.type > 2) {\n        throw new TypeError(`Unsupported firehose event type '${\n          event.body.type\n        }'`);\n      }\n    };\n    return this.instance.subscribeNonResuming({\n      ...options,\n      path: \"firehose/items\",\n      tokenProvider: this.firehoseTokenProvider,\n      listeners: {\n        onEvent,\n        onOpen: options.onOpen,\n        onSubscribe: options.onSubscribe,\n        onError: options.onError,\n        onEnd: options.onEnd,\n      }\n    });\n  }\n}\n\nfunction validateFirehoseCallbacks(callbacks) {\n  const defined = Object.keys(callbacks)\n    .filter(k => callbacks[k] !== undefined)\n    .map(k => ({ name: k, callback: callbacks[k] }));\n  defined.forEach(({ name, callback }) => {\n    if (typeof callback !== \"function\") {\n      throw new TypeError(`${ name } must be a function, got ${ callback }`);\n    }\n  });\n  if (defined.length === 0) {\n    throw new TypeError(\"Must provide at least one of onPublish, onSubscribe, or onUnsubscribe\");\n  }\n}\n"],"names":["webpackUniversalModuleDefinition","root","factory","module","this","modules","installedModules","__webpack_require__","moduleId","exports","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","responseToHeadersObject","headerStr","headers","headerPairs","split","length","headerPair","index","indexOf","key","substring","val","ErrorResponse","statusCode","info","fromXHR","xhr","status","getAllResponseHeaders","responseText","NetworkError","error","XhrReadyState","network_1","BaseSubscriptionState","BaseSubscription","logger","onOpen","onError","onEvent","onEnd","event","_this","state","UNOPENED","lastNewlineIndex","gotEOS","onreadystatechange","readyState","UNSENT","OPENED","HEADERS_RECEIVED","assertStateIsIn","OPENING","LOADING","onLoading","DONE","onDone","send","unsubscribe","ENDED","abort","getHeaders","OPEN","ENDING","err","onChunk","Error","response","newlineIndex","lastIndexOf","rawEvents","slice","_i","rawEvents_1","rawEvent","data","JSON","parse","onMessage","message","verifyMessage","onEventMessage","onEOSMessage","stringify","eventMessage","_","id","body","Array","isArray","eventId","eosMessage","validStates","arguments","stateIsValid","some","validState","expectedStates","map","join","actualState","warn","createRetryStrategyOptionsOrDefault","options","initialTimeoutMillis","maxTimeoutMillis","limit","undefined","increaseTimeout","currentTimeout","Retry","waitTimeMillis","DoNotRetry","requestMethodIsSafe","method","toUpperCase","RetryResolution","retryUnsafeRequests","currentRetryCount","increaseTimeoutFunction","currentBackoffMillis","attemptRetry","verbose","constructor","parseInt","shouldSafeRetry","calulateMillisToRetry","retrying_subscription_1","resuming_subscription_1","request_1","subscription_1","base_subscription_1","token_providing_subscription_1","transports_1","subscribe_strategy_1","BaseClient","xhrConstructor","path","requestOptions","createXHR","baseURL","host","replace","encrypted","request","tokenProvider","tokenParams","fetchToken","then","token","executeNetworkRequest","catch","log","subscribeResuming","listeners","retryStrategyOptions","initialEventId","requestFactory","replaceMissingListenersWithNoOps","subscribeStrategyListeners","subscribeStrategyListenersFromSubscriptionListeners","subscriptionStrategy","createResumingStrategy","createTokenProvidingStrategy","createH2TransportStrategy","opened","onSubscribe","onRetrying","subscribeNonResuming","xhrFactory","subscriptionConstructor","createRetryingStrategy","XMLHttpRequest","window","endpoint","open","setRequestHeader","jwt","LogLevel","ConsoleLogger","threshold","logFunction","level","loggerSignature","group","groupEnd","console","VERBOSE","debug","DEBUG","INFO","WARNING","ERROR","EmptyLogger","PCancelable","createXhr","cancelablePromise","onCancel","resolve","reject","retry_strategy_1","retryOptions","nextSubscribeStrategy","retryResolution","ResumingSubscription","onTransition","newState","OpeningSubscriptionState","lastEventId","underlyingSubscription","OpenSubscriptionState","ResumingSubscriptionState","EndedSubscriptionState","EndingSubscriptionState","executeSubscriptionOnce","resolveError","errorResolution","timeout","setTimeout","FailedSubscriptionState","executeNextSubscribeStrategy","clearTimeout","RetryingSubscription","RetryingSubscriptionState","TokenProvidingSubscription","TokenProvidingState","isTokenExpiredError","fetchTokenAndExecuteSubscription","tokenPromise","putTokenIntoHeader","clearToken","cancel","strategy","base_client_1","logger_1","HOST_BASE","Instance","instanceId","serviceName","serviceVersion","splitInstance","platformVersion","cluster","client","absPath","relativePath","default","CancelError","fn","args","apply","unshift","executor","_pending","_canceled","_promise","Promise","_reject","_cancel","canceled","setPrototypeOf","instance_1","subListeners","noop","arg","parseResponse","promise","urlEncode","keys","filter","encodeURIComponent","queryString","encodedData","unixTimeNow","Math","floor","Date","now","Feed","instance","feedId","readTokenProvider","onItem","TypeError","type","lastItemId","previousItems","cursor","cacheExpiryTolerance","feedIdRegex","tokenProviderTimeout","TokenProvider","authEndpoint","authData","cacheIsStale","makeAuthRequest","cache","responseBody","access_token","expires_in","cachedToken","expiresIn","cacheValidUntil","onload","statusText","ontimeout","Feeds","logLevel","listTokenProvider","firehoseTokenProvider","PusherPlatform","prefix","match","startsWith","onPublish","onUnsubscribe","validateFirehoseCallbacks","callbacks","defined","k","callback","forEach"],"mappings":"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"}