{"version":3,"file":"pusher-feeds-client.js","sources":["../node_modules/pusher-platform/target/pusher-platform.js","../src/utils.js","../src/feed.js","../src/constants.js","../src/token-provider.js","../src/feeds.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"PusherPlatform\"] = factory();\n\telse\n\t\troot[\"PusherPlatform\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 11);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction responseToHeadersObject(headerStr) {\n    var headers = {};\n    if (!headerStr) {\n        return headers;\n    }\n    var headerPairs = headerStr.split('\\u000d\\u000a');\n    for (var i = 0; i < headerPairs.length; i++) {\n        var headerPair = headerPairs[i];\n        var index = headerPair.indexOf('\\u003a\\u0020');\n        if (index > 0) {\n            var key = headerPair.substring(0, index);\n            var val = headerPair.substring(index + 2);\n            headers[key] = val;\n        }\n    }\n    return headers;\n}\nexports.responseToHeadersObject = responseToHeadersObject;\nvar ErrorResponse = /** @class */ (function () {\n    function ErrorResponse(statusCode, headers, info) {\n        this.statusCode = statusCode;\n        this.headers = headers;\n        this.info = info;\n    }\n    ErrorResponse.fromXHR = function (xhr) {\n        return new ErrorResponse(xhr.status, responseToHeadersObject(xhr.getAllResponseHeaders()), xhr.responseText);\n    };\n    return ErrorResponse;\n}());\nexports.ErrorResponse = ErrorResponse;\nvar NetworkError = /** @class */ (function () {\n    function NetworkError(error) {\n        this.error = error;\n    }\n    return NetworkError;\n}());\nexports.NetworkError = NetworkError;\n// Follows https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState\nvar XhrReadyState;\n(function (XhrReadyState) {\n    XhrReadyState[XhrReadyState[\"UNSENT\"] = 0] = \"UNSENT\";\n    XhrReadyState[XhrReadyState[\"OPENED\"] = 1] = \"OPENED\";\n    XhrReadyState[XhrReadyState[\"HEADERS_RECEIVED\"] = 2] = \"HEADERS_RECEIVED\";\n    XhrReadyState[XhrReadyState[\"LOADING\"] = 3] = \"LOADING\";\n    XhrReadyState[XhrReadyState[\"DONE\"] = 4] = \"DONE\";\n})(XhrReadyState = exports.XhrReadyState || (exports.XhrReadyState = {}));\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"VERBOSE\"] = 1] = \"VERBOSE\";\n    LogLevel[LogLevel[\"DEBUG\"] = 2] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 3] = \"INFO\";\n    LogLevel[LogLevel[\"WARNING\"] = 4] = \"WARNING\";\n    LogLevel[LogLevel[\"ERROR\"] = 5] = \"ERROR\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\n/**\n * Default implementation of the Logger. Wraps standards console calls.\n * Logs only calls that are at or above the threshold (verbose/debug/info/warn/error)\n * If error is passed, it will append the message to the error object.\n */\nvar ConsoleLogger = /** @class */ (function () {\n    function ConsoleLogger(threshold) {\n        if (threshold === void 0) { threshold = 2; }\n        this.threshold = threshold;\n    }\n    ConsoleLogger.prototype.log = function (logFunction, level, message, error) {\n        if (level >= this.threshold) {\n            var loggerSignature = \"Logger.\" + LogLevel[level];\n            if (error) {\n                console.group();\n                logFunction(loggerSignature + \": \" + message);\n                logFunction(error);\n                console.groupEnd();\n            }\n            else {\n                logFunction(loggerSignature + \": \" + message);\n            }\n        }\n    };\n    ConsoleLogger.prototype.verbose = function (message, error) {\n        this.log(console.log, LogLevel.VERBOSE, message, error);\n    };\n    ConsoleLogger.prototype.debug = function (message, error) {\n        this.log(console.log, LogLevel.DEBUG, message, error);\n    };\n    ConsoleLogger.prototype.info = function (message, error) {\n        this.log(console.info, LogLevel.INFO, message, error);\n    };\n    ConsoleLogger.prototype.warn = function (message, error) {\n        this.log(console.warn, LogLevel.WARNING, message, error);\n    };\n    ConsoleLogger.prototype.error = function (message, error) {\n        this.log(console.error, LogLevel.ERROR, message, error);\n    };\n    return ConsoleLogger;\n}());\nexports.ConsoleLogger = ConsoleLogger;\nvar EmptyLogger = /** @class */ (function () {\n    function EmptyLogger() {\n    }\n    EmptyLogger.prototype.verbose = function (message, error) { };\n    ;\n    EmptyLogger.prototype.debug = function (message, error) { };\n    ;\n    EmptyLogger.prototype.info = function (message, error) { };\n    ;\n    EmptyLogger.prototype.warn = function (message, error) { };\n    ;\n    EmptyLogger.prototype.error = function (message, error) { };\n    ;\n    return EmptyLogger;\n}());\nexports.EmptyLogger = EmptyLogger;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar network_1 = __webpack_require__(0);\nexports.createRetryStrategyOptionsOrDefault = function (options) {\n    var initialTimeoutMillis = options.initialTimeoutMillis || 1000;\n    var maxTimeoutMillis = options.maxTimeoutMillis || 5000;\n    var limit = -1;\n    if (options.limit != undefined && options.limit != null) {\n        limit = options.limit;\n    }\n    var increaseTimeout;\n    if (options.increaseTimeout) {\n        increaseTimeout = options.increaseTimeout;\n    }\n    else {\n        increaseTimeout = function (currentTimeout) {\n            if ((currentTimeout * 2) > maxTimeoutMillis) {\n                return maxTimeoutMillis;\n            }\n            else {\n                return currentTimeout * 2;\n            }\n        };\n    }\n    return {\n        initialTimeoutMillis: initialTimeoutMillis,\n        maxTimeoutMillis: maxTimeoutMillis,\n        limit: limit,\n        increaseTimeout: increaseTimeout\n    };\n};\nvar Retry = /** @class */ (function () {\n    function Retry(waitTimeMillis) {\n        this.waitTimeMillis = waitTimeMillis;\n    }\n    return Retry;\n}());\nexports.Retry = Retry;\nvar DoNotRetry = /** @class */ (function () {\n    function DoNotRetry(error) {\n        this.error = error;\n    }\n    return DoNotRetry;\n}());\nexports.DoNotRetry = DoNotRetry;\nvar requestMethodIsSafe = function (method) {\n    method = method.toUpperCase();\n    return method === 'GET' || method === 'HEAD' || method === 'OPTIONS' || method === 'SUBSCRIBE';\n};\nvar RetryResolution = /** @class */ (function () {\n    function RetryResolution(options, logger, retryUnsafeRequests) {\n        this.options = options;\n        this.logger = logger;\n        this.retryUnsafeRequests = retryUnsafeRequests;\n        this.currentRetryCount = 0;\n        this.initialTimeoutMillis = options.initialTimeoutMillis;\n        this.maxTimeoutMillis = options.maxTimeoutMillis;\n        this.limit = options.limit;\n        this.increaseTimeoutFunction = options.increaseTimeout;\n        this.currentBackoffMillis = this.initialTimeoutMillis;\n    }\n    RetryResolution.prototype.attemptRetry = function (error) {\n        this.logger.verbose(this.constructor.name + \":  Error received\", error);\n        if (this.currentRetryCount >= this.limit && this.limit >= 0) {\n            this.logger.verbose(this.constructor.name + \":  Retry count is over the maximum limit: \" + this.limit);\n            return new DoNotRetry(error);\n        }\n        if (error instanceof network_1.ErrorResponse && error.headers['Retry-After']) {\n            this.logger.verbose(this.constructor.name + \":  Retry-After header is present, retrying in \" + error.headers['Retry-After']);\n            return new Retry(parseInt(error.headers['Retry-After']) * 1000);\n        }\n        if (error instanceof network_1.NetworkError || (error instanceof network_1.ErrorResponse && requestMethodIsSafe(error.headers[\"Request-Method\"])) || this.retryUnsafeRequests) {\n            return this.shouldSafeRetry(error);\n        }\n        if (error instanceof network_1.NetworkError)\n            return this.shouldSafeRetry(error);\n        this.logger.verbose(this.constructor.name + \": Error is not retryable\", error);\n        return new DoNotRetry(error);\n    };\n    RetryResolution.prototype.shouldSafeRetry = function (error) {\n        if (error instanceof network_1.NetworkError) {\n            this.logger.verbose(this.constructor.name + \": It's a Network Error, will retry\", error);\n            return new Retry(this.calulateMillisToRetry());\n        }\n        else if (error instanceof network_1.ErrorResponse) {\n            if (error.statusCode >= 500 && error.statusCode < 600) {\n                this.logger.verbose(this.constructor.name + \": Error 5xx, will retry\");\n                return new Retry(this.calulateMillisToRetry());\n            }\n        }\n        this.logger.verbose(this.constructor.name + \": Error is not retryable\", error);\n        return new DoNotRetry(error);\n    };\n    RetryResolution.prototype.calulateMillisToRetry = function () {\n        this.currentBackoffMillis = this.increaseTimeoutFunction(this.currentBackoffMillis);\n        this.logger.verbose(this.constructor.name + \": Retrying in \" + this.currentBackoffMillis + \"ms\");\n        return this.currentBackoffMillis;\n    };\n    return RetryResolution;\n}());\nexports.RetryResolution = RetryResolution;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar retrying_subscription_1 = __webpack_require__(6);\nvar resuming_subscription_1 = __webpack_require__(5);\nvar request_1 = __webpack_require__(4);\nvar logger_1 = __webpack_require__(1);\nvar subscription_1 = __webpack_require__(13);\nvar token_providing_subscription_1 = __webpack_require__(7);\nvar transports_1 = __webpack_require__(8);\nvar subscribe_strategy_1 = __webpack_require__(12);\nvar websocket_1 = __webpack_require__(15);\nvar http_1 = __webpack_require__(14);\nvar BaseClient = /** @class */ (function () {\n    function BaseClient(options) {\n        this.options = options;\n        this.host = options.host.replace(/(\\/)+$/, '');\n        this.logger = options.logger || new logger_1.ConsoleLogger();\n        this.websocketTransport = new websocket_1.default(this.host);\n        this.httpTransport = new http_1.default(this.host);\n    }\n    BaseClient.prototype.request = function (options, tokenProvider, tokenParams) {\n        var _this = this;\n        if (tokenProvider) {\n            return tokenProvider.fetchToken(tokenParams).then(function (token) {\n                options.headers['Authorization'] = \"Bearer \" + token;\n                return request_1.executeNetworkRequest(function () { return _this.httpTransport.request(options); }, options);\n            }).catch(function (error) {\n                console.log(error);\n            });\n        }\n        else {\n            return request_1.executeNetworkRequest(function () { return _this.httpTransport.request(options); }, options);\n        }\n    };\n    BaseClient.prototype.subscribeResuming = function (path, headers, listeners, retryStrategyOptions, initialEventId, tokenProvider) {\n        listeners = subscription_1.replaceMissingListenersWithNoOps(listeners);\n        var subscribeStrategyListeners = subscribe_strategy_1.subscribeStrategyListenersFromSubscriptionListeners(listeners);\n        var subscriptionStrategy = resuming_subscription_1.createResumingStrategy(retryStrategyOptions, initialEventId, token_providing_subscription_1.createTokenProvidingStrategy(tokenProvider, transports_1.createTransportStrategy(path, this.websocketTransport, this.logger), this.logger), this.logger);\n        var opened = false;\n        return subscriptionStrategy({\n            onOpen: function (headers) {\n                if (!opened) {\n                    opened = true;\n                    listeners.onOpen(headers);\n                }\n                listeners.onSubscribe();\n            },\n            onRetrying: subscribeStrategyListeners.onRetrying,\n            onError: subscribeStrategyListeners.onError,\n            onEvent: subscribeStrategyListeners.onEvent,\n            onEnd: subscribeStrategyListeners.onEnd\n        }, headers);\n    };\n    BaseClient.prototype.subscribeNonResuming = function (path, headers, listeners, retryStrategyOptions, tokenProvider) {\n        listeners = subscription_1.replaceMissingListenersWithNoOps(listeners);\n        var subscribeStrategyListeners = subscribe_strategy_1.subscribeStrategyListenersFromSubscriptionListeners(listeners);\n        var subscriptionStrategy = retrying_subscription_1.createRetryingStrategy(retryStrategyOptions, token_providing_subscription_1.createTokenProvidingStrategy(tokenProvider, transports_1.createTransportStrategy(path, this.websocketTransport, this.logger), this.logger), this.logger);\n        var opened = false;\n        return subscriptionStrategy({\n            onOpen: function (headers) {\n                if (!opened) {\n                    opened = true;\n                    listeners.onOpen(headers);\n                }\n                listeners.onSubscribe();\n            },\n            onRetrying: subscribeStrategyListeners.onRetrying,\n            onError: subscribeStrategyListeners.onError,\n            onEvent: subscribeStrategyListeners.onEvent,\n            onEnd: subscribeStrategyListeners.onEnd\n        }, headers);\n    };\n    return BaseClient;\n}());\nexports.BaseClient = BaseClient;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar network_1 = __webpack_require__(0);\nvar PCancelable = __webpack_require__(10);\nfunction executeNetworkRequest(createXhr, options) {\n    var cancelablePromise = new PCancelable(function (onCancel, resolve, reject) {\n        var xhr = createXhr();\n        onCancel(function () {\n            xhr.abort();\n        });\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    resolve(xhr.response);\n                }\n                else if (xhr.status !== 0) {\n                    reject(network_1.ErrorResponse.fromXHR(xhr));\n                }\n                else {\n                    reject(new network_1.NetworkError(\"No Connection\"));\n                }\n            }\n        };\n        xhr.send(JSON.stringify(options.body));\n    });\n    return cancelablePromise;\n}\nexports.executeNetworkRequest = executeNetworkRequest;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar retry_strategy_1 = __webpack_require__(2);\nvar network_1 = __webpack_require__(0);\nexports.createResumingStrategy = function (retryOptions, initialEventId, nextSubscribeStrategy, logger) {\n    retryOptions = retry_strategy_1.createRetryStrategyOptionsOrDefault(retryOptions);\n    var retryResolution = new retry_strategy_1.RetryResolution(retryOptions, logger);\n    var ResumingSubscription = /** @class */ (function () {\n        function ResumingSubscription(listeners, headers) {\n            var _this = this;\n            this.onTransition = function (newState) {\n                _this.state = newState;\n            };\n            this.unsubscribe = function () {\n                _this.state.unsubscribe();\n            };\n            var OpeningSubscriptionState = /** @class */ (function () {\n                function OpeningSubscriptionState(onTransition) {\n                    var _this = this;\n                    this.onTransition = onTransition;\n                    var lastEventId = initialEventId;\n                    logger.verbose(\"ResumingSubscription: transitioning to OpeningSubscriptionState\");\n                    if (lastEventId) {\n                        headers[\"Last-Event-Id\"] = lastEventId;\n                        logger.verbose(\"ResumingSubscription: initialEventId is \" + lastEventId);\n                    }\n                    this.underlyingSubscription = nextSubscribeStrategy({\n                        onOpen: function (headers) {\n                            onTransition(new OpenSubscriptionState(headers, _this.underlyingSubscription, onTransition));\n                        },\n                        onRetrying: listeners.onRetrying,\n                        onError: function (error) {\n                            onTransition(new ResumingSubscriptionState(error, lastEventId, onTransition));\n                        },\n                        onEvent: function (event) {\n                            lastEventId = event.eventId;\n                            listeners.onEvent(event);\n                        },\n                        onEnd: function (error) {\n                            onTransition(new EndedSubscriptionState(error));\n                        }\n                    }, headers);\n                }\n                OpeningSubscriptionState.prototype.unsubscribe = function () {\n                    this.onTransition(new EndingSubscriptionState());\n                    this.underlyingSubscription.unsubscribe();\n                };\n                return OpeningSubscriptionState;\n            }());\n            var OpenSubscriptionState = /** @class */ (function () {\n                function OpenSubscriptionState(headers, underlyingSubscription, onTransition) {\n                    this.underlyingSubscription = underlyingSubscription;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"ResumingSubscription: transitioning to OpenSubscriptionState\");\n                    listeners.onOpen(headers);\n                }\n                OpenSubscriptionState.prototype.unsubscribe = function () {\n                    this.onTransition(new EndingSubscriptionState());\n                    this.underlyingSubscription.unsubscribe();\n                };\n                return OpenSubscriptionState;\n            }());\n            var ResumingSubscriptionState = /** @class */ (function () {\n                function ResumingSubscriptionState(error, lastEventId, onTransition) {\n                    var _this = this;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"ResumingSubscription: transitioning to ResumingSubscriptionState\");\n                    var executeSubscriptionOnce = function (error, lastEventId) {\n                        listeners.onRetrying();\n                        var resolveError = function (error) {\n                            if (error instanceof network_1.ErrorResponse) {\n                                error.headers[\"Request-Method\"] = \"SUBSCRIBE\";\n                            }\n                            return retryResolution.attemptRetry(error);\n                        };\n                        var errorResolution = resolveError(error);\n                        if (errorResolution instanceof retry_strategy_1.Retry) {\n                            _this.timeout = window.setTimeout(function () {\n                                executeNextSubscribeStrategy(lastEventId);\n                            }, errorResolution.waitTimeMillis);\n                        }\n                        else {\n                            onTransition(new FailedSubscriptionState(error));\n                        }\n                    };\n                    var executeNextSubscribeStrategy = function (lastEventId) {\n                        logger.verbose(\"ResumingSubscription: trying to re-establish the subscription\");\n                        if (lastEventId) {\n                            logger.verbose(\"ResumingSubscription: lastEventId: \" + lastEventId);\n                            headers[\"Last-Event-Id\"] = lastEventId;\n                        }\n                        _this.underlyingSubscription = nextSubscribeStrategy({\n                            onOpen: function (headers) {\n                                onTransition(new OpenSubscriptionState(headers, _this.underlyingSubscription, onTransition));\n                            },\n                            onRetrying: listeners.onRetrying,\n                            onError: function (error) {\n                                executeSubscriptionOnce(error, lastEventId);\n                            },\n                            onEvent: function (event) {\n                                lastEventId = event.eventId;\n                                listeners.onEvent(event);\n                            },\n                            onEnd: function (error) {\n                                onTransition(new EndedSubscriptionState(error));\n                            },\n                        }, headers);\n                    };\n                    executeSubscriptionOnce(error, lastEventId);\n                }\n                ResumingSubscriptionState.prototype.unsubscribe = function () {\n                    this.onTransition(new EndingSubscriptionState());\n                    window.clearTimeout(this.timeout);\n                    this.underlyingSubscription.unsubscribe();\n                };\n                return ResumingSubscriptionState;\n            }());\n            var EndingSubscriptionState = /** @class */ (function () {\n                function EndingSubscriptionState(error) {\n                    logger.verbose(\"ResumingSubscription: transitioning to EndingSubscriptionState\");\n                }\n                EndingSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription is already ending\");\n                };\n                return EndingSubscriptionState;\n            }());\n            var EndedSubscriptionState = /** @class */ (function () {\n                function EndedSubscriptionState(error) {\n                    logger.verbose(\"ResumingSubscription: transitioning to EndedSubscriptionState\");\n                    listeners.onEnd(error);\n                }\n                EndedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return EndedSubscriptionState;\n            }());\n            var FailedSubscriptionState = /** @class */ (function () {\n                function FailedSubscriptionState(error) {\n                    logger.verbose(\"ResumingSubscription: transitioning to FailedSubscriptionState\", error);\n                    listeners.onError(error);\n                }\n                FailedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return FailedSubscriptionState;\n            }());\n            //Here we init the state transition shenaningans\n            this.state = new OpeningSubscriptionState(this.onTransition);\n        }\n        return ResumingSubscription;\n    }());\n    //All the magic in the world.\n    return function (listeners, headers) {\n        return new ResumingSubscription(listeners, headers);\n    };\n};\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar retry_strategy_1 = __webpack_require__(2);\nvar network_1 = __webpack_require__(0);\nexports.createRetryingStrategy = function (retryOptions, nextSubscribeStrategy, logger) {\n    retryOptions = retry_strategy_1.createRetryStrategyOptionsOrDefault(retryOptions);\n    var retryResolution = new retry_strategy_1.RetryResolution(retryOptions, logger);\n    var RetryingSubscription = /** @class */ (function () {\n        function RetryingSubscription(listeners, headers) {\n            var _this = this;\n            this.onTransition = function (newState) {\n                _this.state = newState;\n            };\n            this.unsubscribe = function () {\n                _this.state.unsubscribe();\n            };\n            var OpeningSubscriptionState = /** @class */ (function () {\n                function OpeningSubscriptionState(onTransition) {\n                    var _this = this;\n                    logger.verbose(\"RetryingSubscription: transitioning to OpeningSubscriptionState\");\n                    this.underlyingSubscription = nextSubscribeStrategy({\n                        onOpen: function (headers) { return onTransition(new OpenSubscriptionState(headers, _this.underlyingSubscription, onTransition)); },\n                        onRetrying: listeners.onRetrying,\n                        onError: function (error) { return onTransition(new RetryingSubscriptionState(error, onTransition)); },\n                        onEvent: listeners.onEvent,\n                        onEnd: function (error) { return onTransition(new EndedSubscriptionState(error)); }\n                    }, headers);\n                }\n                OpeningSubscriptionState.prototype.unsubscribe = function () {\n                    this.underlyingSubscription.unsubscribe();\n                    throw new Error(\"Method not implemented.\");\n                };\n                return OpeningSubscriptionState;\n            }());\n            var RetryingSubscriptionState = /** @class */ (function () {\n                function RetryingSubscriptionState(error, onTransition) {\n                    var _this = this;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"RetryingSubscription: transitioning to RetryingSubscriptionState\");\n                    var executeSubscriptionOnce = function (error) {\n                        listeners.onRetrying();\n                        var resolveError = function (error) {\n                            if (error instanceof network_1.ErrorResponse) {\n                                error.headers[\"Request-Method\"] = \"SUBSCRIBE\";\n                            }\n                            return retryResolution.attemptRetry(error);\n                        };\n                        var errorResolution = resolveError(error);\n                        if (errorResolution instanceof retry_strategy_1.Retry) {\n                            _this.timeout = window.setTimeout(function () {\n                                executeNextSubscribeStrategy();\n                            }, errorResolution.waitTimeMillis);\n                        }\n                        else {\n                            onTransition(new FailedSubscriptionState(error));\n                        }\n                    };\n                    var executeNextSubscribeStrategy = function () {\n                        logger.verbose(\"RetryingSubscription: trying to re-establish the subscription\");\n                        var underlyingSubscription = nextSubscribeStrategy({\n                            onOpen: function (headers) {\n                                onTransition(new OpenSubscriptionState(headers, underlyingSubscription, onTransition));\n                            },\n                            onRetrying: listeners.onRetrying,\n                            onError: function (error) { return executeSubscriptionOnce(error); },\n                            onEvent: listeners.onEvent,\n                            onEnd: function (error) { return onTransition(new EndedSubscriptionState(error)); }\n                        }, headers);\n                    };\n                    executeSubscriptionOnce(error);\n                }\n                RetryingSubscriptionState.prototype.unsubscribe = function () {\n                    window.clearTimeout(this.timeout);\n                    this.onTransition(new EndedSubscriptionState());\n                };\n                return RetryingSubscriptionState;\n            }());\n            var OpenSubscriptionState = /** @class */ (function () {\n                function OpenSubscriptionState(headers, underlyingSubscription, onTransition) {\n                    this.underlyingSubscription = underlyingSubscription;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"RetryingSubscription: transitioning to OpenSubscriptionState\");\n                    listeners.onOpen(headers);\n                }\n                OpenSubscriptionState.prototype.unsubscribe = function () {\n                    this.underlyingSubscription.unsubscribe();\n                    this.onTransition(new EndedSubscriptionState());\n                };\n                return OpenSubscriptionState;\n            }());\n            var EndedSubscriptionState = /** @class */ (function () {\n                function EndedSubscriptionState(error) {\n                    logger.verbose(\"RetryingSubscription: transitioning to EndedSubscriptionState\");\n                    listeners.onEnd(error);\n                }\n                EndedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return EndedSubscriptionState;\n            }());\n            var FailedSubscriptionState = /** @class */ (function () {\n                function FailedSubscriptionState(error) {\n                    logger.verbose(\"RetryingSubscription: transitioning to FailedSubscriptionState\", error);\n                    listeners.onError(error);\n                }\n                FailedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return FailedSubscriptionState;\n            }());\n            this.state = new OpeningSubscriptionState(this.onTransition);\n        }\n        return RetryingSubscription;\n    }());\n    return function (listeners, headers) { return new RetryingSubscription(listeners, headers); };\n};\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar network_1 = __webpack_require__(0);\nexports.createTokenProvidingStrategy = function (tokenProvider, nextSubscribeStrategy, logger) {\n    var TokenProvidingSubscription = /** @class */ (function () {\n        function TokenProvidingSubscription(listeners, headers) {\n            var _this = this;\n            this.onTransition = function (newState) {\n                _this.state = newState;\n            };\n            this.unsubscribe = function () {\n                _this.state.unsubscribe();\n            };\n            var TokenProvidingState = /** @class */ (function () {\n                function TokenProvidingState(onTransition) {\n                    var _this = this;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"TokenProvidingSubscription: transitioning to TokenProvidingState\");\n                    var isTokenExpiredError = function (error) {\n                        return (error instanceof network_1.ErrorResponse &&\n                            error.statusCode === 401 &&\n                            error.info === \"authentication/expired\");\n                    };\n                    var fetchTokenAndExecuteSubscription = function () {\n                        _this.tokenPromise = tokenProvider.fetchToken()\n                            .then(function (token) {\n                            _this.putTokenIntoHeader(token);\n                            _this.underlyingSubscription = nextSubscribeStrategy({\n                                onOpen: function (headers) {\n                                    onTransition(new OpenSubscriptionState(headers, _this.underlyingSubscription, onTransition));\n                                },\n                                onRetrying: listeners.onRetrying,\n                                onError: function (error) {\n                                    if (isTokenExpiredError(error)) {\n                                        tokenProvider.clearToken(token);\n                                        fetchTokenAndExecuteSubscription();\n                                    }\n                                    else {\n                                        onTransition(new FailedSubscriptionState(error));\n                                    }\n                                },\n                                onEvent: listeners.onEvent,\n                                onEnd: function (error) {\n                                    onTransition(new EndedSubscriptionState(error));\n                                }\n                            }, headers);\n                        })\n                            .catch(function (error) {\n                            (function (error) {\n                                onTransition(new FailedSubscriptionState(error));\n                            });\n                        });\n                    };\n                    fetchTokenAndExecuteSubscription();\n                }\n                TokenProvidingState.prototype.unsubscribe = function () {\n                    if (this.tokenPromise)\n                        this.tokenPromise.cancel();\n                    this.underlyingSubscription.unsubscribe();\n                    this.onTransition(new EndedSubscriptionState());\n                };\n                TokenProvidingState.prototype.putTokenIntoHeader = function (token) {\n                    if (token) {\n                        headers['Authorization'] = \"Bearer \" + token;\n                        logger.verbose(\"TokenProvidingSubscription: token fetched: \" + token);\n                    }\n                };\n                return TokenProvidingState;\n            }());\n            var OpenSubscriptionState = /** @class */ (function () {\n                function OpenSubscriptionState(headers, underlyingSubscription, onTransition) {\n                    this.headers = headers;\n                    this.underlyingSubscription = underlyingSubscription;\n                    this.onTransition = onTransition;\n                    logger.verbose(\"TokenProvidingSubscription: transitioning to OpenSubscriptionState\");\n                    listeners.onOpen(headers);\n                }\n                OpenSubscriptionState.prototype.unsubscribe = function () {\n                    this.underlyingSubscription.unsubscribe();\n                    this.onTransition(new EndedSubscriptionState());\n                };\n                return OpenSubscriptionState;\n            }());\n            var FailedSubscriptionState = /** @class */ (function () {\n                function FailedSubscriptionState(error) {\n                    logger.verbose(\"TokenProvidingSubscription: transitioning to FailedSubscriptionState\", error);\n                    listeners.onError(error);\n                }\n                FailedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return FailedSubscriptionState;\n            }());\n            var EndedSubscriptionState = /** @class */ (function () {\n                function EndedSubscriptionState(error) {\n                    logger.verbose(\"TokenProvidingSubscription: transitioning to EndedSubscriptionState\");\n                    listeners.onEnd(error);\n                }\n                EndedSubscriptionState.prototype.unsubscribe = function () {\n                    throw new Error(\"Subscription has already ended\");\n                };\n                return EndedSubscriptionState;\n            }());\n            this.state = new TokenProvidingState(this.onTransition);\n        }\n        return TokenProvidingSubscription;\n    }());\n    //Token provider might not be there. If missing, go straight to the underlying subscribe strategy\n    if (tokenProvider) {\n        return function (listeners, headers) { return new TokenProvidingSubscription(listeners, headers); };\n    }\n    else {\n        return function (listeners, headers) {\n            return nextSubscribeStrategy(listeners, headers);\n        };\n    }\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createTransportStrategy = function (path, transport, logger) {\n    var strategy = function (listeners, headers) { return (transport.subscribe(path, listeners, headers)); };\n    return strategy;\n};\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar base_client_1 = __webpack_require__(3);\nvar logger_1 = __webpack_require__(1);\nvar HOST_BASE = \"pusherplatform.io\";\nvar Instance = /** @class */ (function () {\n    function Instance(options) {\n        if (!options.locator)\n            throw new Error('Expected `locator` property in Instance options!');\n        if (options.locator.split(\":\").length !== 3)\n            throw new Error('The locator property is in the wrong format!');\n        if (!options.serviceName)\n            throw new Error('Expected `serviceName` property in Instance options!');\n        if (!options.serviceVersion)\n            throw new Error('Expected `serviceVersion` property in Instance otpions!');\n        var splitLocator = options.locator.split(\":\");\n        this.platformVersion = splitLocator[0];\n        this.cluster = splitLocator[1];\n        this.id = splitLocator[2];\n        this.serviceName = options.serviceName;\n        this.serviceVersion = options.serviceVersion;\n        this.host = options.host || this.cluster + \".\" + HOST_BASE;\n        this.logger = options.logger || new logger_1.ConsoleLogger();\n        this.client = options.client || new base_client_1.BaseClient({\n            encrypted: options.encrypted,\n            host: this.host,\n            logger: this.logger\n        });\n        this.tokenProvider = options.tokenProvider;\n    }\n    Instance.prototype.request = function (options, tokenProvider, tokenParams) {\n        options.path = this.absPath(options.path);\n        if (options.headers == null || options.headers == undefined) {\n            options.headers = {};\n        }\n        var tokenProviderToUse = tokenProvider || this.tokenProvider;\n        return this.client.request(options, tokenProviderToUse, tokenParams);\n    };\n    Instance.prototype.subscribeNonResuming = function (options) {\n        var headers = options.headers || {};\n        var retryStrategyOptions = options.retryStrategyOptions || {};\n        var tokenProvider = options.tokenProvider || this.tokenProvider;\n        return this.client.subscribeNonResuming(this.absPath(options.path), headers, options.listeners, retryStrategyOptions, tokenProvider);\n    };\n    Instance.prototype.subscribeResuming = function (options) {\n        var headers = options.headers || {};\n        var retryStrategyOptions = options.retryStrategyOptions || {};\n        var tokenProvider = options.tokenProvider || this.tokenProvider;\n        return this.client.subscribeResuming(this.absPath(options.path), headers, options.listeners, retryStrategyOptions, options.initialEventId, tokenProvider);\n    };\n    Instance.prototype.absPath = function (relativePath) {\n        return (\"/services/\" + this.serviceName + \"/\" + this.serviceVersion + \"/\" + this.id + \"/\" + relativePath).replace(/\\/+/g, \"/\").replace(/\\/+$/, \"\");\n    };\n    return Instance;\n}());\nexports.default = Instance;\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nclass CancelError extends Error {\n\tconstructor() {\n\t\tsuper('Promise was canceled');\n\t\tthis.name = 'CancelError';\n\t}\n}\n\nclass PCancelable {\n\tstatic fn(fn) {\n\t\treturn function () {\n\t\t\tconst args = [].slice.apply(arguments);\n\t\t\treturn new PCancelable((onCancel, resolve, reject) => {\n\t\t\t\targs.unshift(onCancel);\n\t\t\t\tfn.apply(null, args).then(resolve, reject);\n\t\t\t});\n\t\t};\n\t}\n\n\tconstructor(executor) {\n\t\tthis._pending = true;\n\t\tthis._canceled = false;\n\n\t\tthis._promise = new Promise((resolve, reject) => {\n\t\t\tthis._reject = reject;\n\n\t\t\treturn executor(\n\t\t\t\tfn => {\n\t\t\t\t\tthis._cancel = fn;\n\t\t\t\t},\n\t\t\t\tval => {\n\t\t\t\t\tthis._pending = false;\n\t\t\t\t\tresolve(val);\n\t\t\t\t},\n\t\t\t\terr => {\n\t\t\t\t\tthis._pending = false;\n\t\t\t\t\treject(err);\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tthen() {\n\t\treturn this._promise.then.apply(this._promise, arguments);\n\t}\n\n\tcatch() {\n\t\treturn this._promise.catch.apply(this._promise, arguments);\n\t}\n\n\tcancel() {\n\t\tif (!this._pending || this._canceled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (typeof this._cancel === 'function') {\n\t\t\ttry {\n\t\t\t\tthis._cancel();\n\t\t\t} catch (err) {\n\t\t\t\tthis._reject(err);\n\t\t\t}\n\t\t}\n\n\t\tthis._canceled = true;\n\t\tthis._reject(new CancelError());\n\t}\n\n\tget canceled() {\n\t\treturn this._canceled;\n\t}\n}\n\nObject.setPrototypeOf(PCancelable.prototype, Promise.prototype);\n\nmodule.exports = PCancelable;\nmodule.exports.CancelError = CancelError;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar transports_1 = __webpack_require__(8);\nexports.createTransportStrategy = transports_1.createTransportStrategy;\nvar request_1 = __webpack_require__(4);\nexports.executeNetworkRequest = request_1.executeNetworkRequest;\nvar resuming_subscription_1 = __webpack_require__(5);\nexports.createResumingStrategy = resuming_subscription_1.createResumingStrategy;\nvar retry_strategy_1 = __webpack_require__(2);\nexports.createRetryStrategyOptionsOrDefault = retry_strategy_1.createRetryStrategyOptionsOrDefault;\nexports.DoNotRetry = retry_strategy_1.DoNotRetry;\nexports.Retry = retry_strategy_1.Retry;\nexports.RetryResolution = retry_strategy_1.RetryResolution;\nvar instance_1 = __webpack_require__(9);\nexports.Instance = instance_1.default;\nvar base_client_1 = __webpack_require__(3);\nexports.BaseClient = base_client_1.BaseClient;\nvar logger_1 = __webpack_require__(1);\nexports.ConsoleLogger = logger_1.ConsoleLogger;\nexports.EmptyLogger = logger_1.EmptyLogger;\nvar retrying_subscription_1 = __webpack_require__(6);\nexports.createRetryingStrategy = retrying_subscription_1.createRetryingStrategy;\nvar token_providing_subscription_1 = __webpack_require__(7);\nexports.createTokenProvidingStrategy = token_providing_subscription_1.createTokenProvidingStrategy;\nvar network_1 = __webpack_require__(0);\nexports.ErrorResponse = network_1.ErrorResponse;\nexports.NetworkError = network_1.NetworkError;\nexports.responseToHeadersObject = network_1.responseToHeadersObject;\nexports.XhrReadyState = network_1.XhrReadyState;\nexports.default = {\n    Instance: instance_1.default,\n    BaseClient: base_client_1.BaseClient,\n    ConsoleLogger: logger_1.ConsoleLogger, EmptyLogger: logger_1.EmptyLogger,\n};\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.subscribeStrategyListenersFromSubscriptionListeners = function (subListeners) {\n    return {\n        onOpen: subListeners.onOpen,\n        onRetrying: subListeners.onRetrying,\n        onError: subListeners.onError,\n        onEvent: subListeners.onEvent,\n        onEnd: subListeners.onEnd\n    };\n};\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n;\n//Move this util somewhere else?\nvar noop = function (arg) { };\nexports.replaceMissingListenersWithNoOps = function (listeners) {\n    var onOpen = listeners.onOpen || noop;\n    var onSubscribe = listeners.onSubscribe || noop;\n    var onEvent = listeners.onEvent || noop;\n    var onError = listeners.onError || noop;\n    var onEnd = listeners.onEnd || noop;\n    var onRetrying = listeners.onRetrying || noop;\n    return {\n        onOpen: onOpen,\n        onSubscribe: onSubscribe,\n        onRetrying: onRetrying,\n        onEvent: onEvent,\n        onError: onError,\n        onEnd: onEnd\n    };\n};\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar network_1 = __webpack_require__(0);\nvar HttpTransportState;\n(function (HttpTransportState) {\n    HttpTransportState[HttpTransportState[\"UNOPENED\"] = 0] = \"UNOPENED\";\n    HttpTransportState[HttpTransportState[\"OPENING\"] = 1] = \"OPENING\";\n    HttpTransportState[HttpTransportState[\"OPEN\"] = 2] = \"OPEN\";\n    HttpTransportState[HttpTransportState[\"ENDING\"] = 3] = \"ENDING\";\n    HttpTransportState[HttpTransportState[\"ENDED\"] = 4] = \"ENDED\"; // called onEnd() or onError(err)\n})(HttpTransportState = exports.HttpTransportState || (exports.HttpTransportState = {}));\n;\nvar HttpSubscription = /** @class */ (function () {\n    function HttpSubscription(xhr, listeners) {\n        var _this = this;\n        this.state = HttpTransportState.UNOPENED;\n        this.lastNewlineIndex = 0;\n        this.gotEOS = false;\n        this.xhr = xhr;\n        this.listeners = listeners;\n        this.xhr.onreadystatechange = function () {\n            switch (_this.xhr.readyState) {\n                case network_1.XhrReadyState.UNSENT:\n                case network_1.XhrReadyState.OPENED:\n                case network_1.XhrReadyState.HEADERS_RECEIVED:\n                    _this.assertStateIsIn(HttpTransportState.OPENING);\n                    break;\n                case network_1.XhrReadyState.LOADING:\n                    _this.onLoading();\n                    break;\n                case network_1.XhrReadyState.DONE:\n                    _this.onDone();\n                    break;\n            }\n        };\n        this.state = HttpTransportState.OPENING;\n        this.xhr.send();\n        return this;\n    }\n    HttpSubscription.prototype.unsubscribe = function () {\n        this.state = HttpTransportState.ENDED;\n        this.xhr.abort();\n        this.listeners.onEnd(null);\n    };\n    HttpSubscription.prototype.onLoading = function () {\n        this.assertStateIsIn(HttpTransportState.OPENING, HttpTransportState.OPEN, HttpTransportState.ENDING);\n        if (this.xhr.status === 200) {\n            //Check if we just transitioned to the open state\n            if (this.state === HttpTransportState.OPENING) {\n                this.state = HttpTransportState.OPEN;\n                console.log(network_1.responseToHeadersObject(this.xhr.getAllResponseHeaders()));\n                this.listeners.onOpen(network_1.responseToHeadersObject(this.xhr.getAllResponseHeaders()));\n            }\n            this.assertStateIsIn(HttpTransportState.OPEN);\n            var err = this.onChunk(); // might transition our state from OPEN -> ENDING\n            this.assertStateIsIn(HttpTransportState.OPEN, HttpTransportState.ENDING);\n            if (err) {\n                this.state = HttpTransportState.ENDED;\n                if (err instanceof network_1.ErrorResponse && err.statusCode != 204) {\n                    this.listeners.onError(err);\n                }\n                // Because we abort()ed, we will get no more calls to our onreadystatechange handler,\n                // and so we will not call the event handler again.\n                // Finish with options.onError instead of the options.onEnd.\n            }\n            else {\n                // We consumed some response text, and all's fine. We expect more text.\n            }\n        }\n    };\n    HttpSubscription.prototype.onDone = function () {\n        if (this.xhr.status === 200) {\n            if (this.state === HttpTransportState.OPENING) {\n                this.state = HttpTransportState.OPEN;\n                this.listeners.onOpen(network_1.responseToHeadersObject(this.xhr.getAllResponseHeaders()));\n            }\n            this.assertStateIsIn(HttpTransportState.OPEN, HttpTransportState.ENDING);\n            var err = this.onChunk();\n            if (err) {\n                this.state = HttpTransportState.ENDED;\n                if (err.statusCode === 204) {\n                    this.listeners.onEnd(null);\n                }\n                else {\n                    this.listeners.onError(err);\n                }\n            }\n            else if (this.state <= HttpTransportState.ENDING) {\n                this.listeners.onError(new Error(\"HTTP response ended without receiving EOS message\"));\n            }\n            else {\n                // Stream ended normally.\n                this.listeners.onEnd(null);\n            }\n        }\n        else {\n            this.assertStateIsIn(HttpTransportState.OPENING, HttpTransportState.OPEN, HttpTransportState.ENDED);\n            if (this.state === HttpTransportState.ENDED) {\n                // We aborted the request deliberately, and called onError/onEnd elsewhere.\n                return;\n            }\n            else if (this.xhr.status === 0) {\n                this.listeners.onError(new network_1.NetworkError(\"Connection lost.\"));\n            }\n            else {\n                this.listeners.onError(network_1.ErrorResponse.fromXHR(this.xhr));\n            }\n        }\n    };\n    HttpSubscription.prototype.onChunk = function () {\n        this.assertStateIsIn(HttpTransportState.OPEN);\n        var response = this.xhr.responseText;\n        var newlineIndex = response.lastIndexOf(\"\\n\");\n        if (newlineIndex > this.lastNewlineIndex) {\n            var rawEvents = response.slice(this.lastNewlineIndex, newlineIndex).split(\"\\n\");\n            this.lastNewlineIndex = newlineIndex;\n            for (var _i = 0, rawEvents_1 = rawEvents; _i < rawEvents_1.length; _i++) {\n                var rawEvent = rawEvents_1[_i];\n                if (rawEvent.length === 0) {\n                    continue; // FIXME why? This should be a protocol error\n                }\n                var data = JSON.parse(rawEvent);\n                var err = this.onMessage(data);\n                if (err != null) {\n                    return err;\n                }\n            }\n        }\n    };\n    HttpSubscription.prototype.assertStateIsIn = function () {\n        var _this = this;\n        var validStates = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            validStates[_i] = arguments[_i];\n        }\n        var stateIsValid = validStates.some(function (validState) { return validState === _this.state; });\n        if (!stateIsValid) {\n            var expectedStates = validStates.map(function (state) { return HttpTransportState[state]; }).join(', ');\n            var actualState = HttpTransportState[this.state];\n            console.warn(\"Expected this.state to be one of [\" + expectedStates + \"] but it is \" + actualState);\n        }\n    };\n    /**\n    * Calls options.onEvent 0+ times, then returns an Error or null\n    * Also asserts the message is formatted correctly and we're in an allowed state (not terminated).\n    */\n    HttpSubscription.prototype.onMessage = function (message) {\n        this.assertStateIsIn(HttpTransportState.OPEN);\n        this.verifyMessage(message);\n        switch (message[0]) {\n            case 0:\n                return null;\n            case 1:\n                return this.onEventMessage(message);\n            case 255:\n                return this.onEOSMessage(message);\n            default:\n                return new Error(\"Unknown Message: \" + JSON.stringify(message));\n        }\n    };\n    // EITHER calls options.onEvent, OR returns an error\n    HttpSubscription.prototype.onEventMessage = function (eventMessage) {\n        this.assertStateIsIn(HttpTransportState.OPEN);\n        if (eventMessage.length !== 4) {\n            return new Error(\"Event message has \" + eventMessage.length + \" elements (expected 4)\");\n        }\n        var _ = eventMessage[0], id = eventMessage[1], headers = eventMessage[2], body = eventMessage[3];\n        if (typeof id !== \"string\") {\n            return new Error(\"Invalid event ID in message: \" + JSON.stringify(eventMessage));\n        }\n        if (typeof headers !== \"object\" || Array.isArray(headers)) {\n            return new Error(\"Invalid event headers in message: \" + JSON.stringify(eventMessage));\n        }\n        this.listeners.onEvent({ eventId: id, headers: headers, body: body });\n    };\n    /**\n    * EOS message received. Sets subscription state to Ending and returns an error with given status code\n    * @param eosMessage final message of the subscription\n    */\n    HttpSubscription.prototype.onEOSMessage = function (eosMessage) {\n        this.assertStateIsIn(HttpTransportState.OPEN);\n        if (eosMessage.length !== 4) {\n            return new Error(\"EOS message has \" + eosMessage.length + \" elements (expected 4)\");\n        }\n        var _ = eosMessage[0], statusCode = eosMessage[1], headers = eosMessage[2], info = eosMessage[3];\n        if (typeof statusCode !== \"number\") {\n            return new Error(\"Invalid EOS Status Code\");\n        }\n        if (typeof headers !== \"object\" || Array.isArray(headers)) {\n            return new Error(\"Invalid EOS ElementsHeaders\");\n        }\n        this.state = HttpTransportState.ENDING;\n        return new network_1.ErrorResponse(statusCode, headers, info);\n    };\n    /**\n    * Check if a single subscription message is in the right format.\n    * @param message The message to check.\n    * @returns null or error if the message is wrong.\n    */\n    HttpSubscription.prototype.verifyMessage = function (message) {\n        if (this.gotEOS) {\n            return new Error(\"Got another message after EOS message\");\n        }\n        if (!Array.isArray(message)) {\n            return new Error(\"Message is not an array\");\n        }\n        if (message.length < 1) {\n            return new Error(\"Message is empty array\");\n        }\n    };\n    return HttpSubscription;\n}());\nvar HttpTransport = /** @class */ (function () {\n    function HttpTransport(host, encrypted) {\n        this.baseURL = (encrypted !== false ? \"https\" : \"http\") + \"://\" + host;\n    }\n    HttpTransport.prototype.request = function (requestOptions) {\n        return this.createXHR(this.baseURL, requestOptions);\n    };\n    HttpTransport.prototype.subscribe = function (path, listeners, headers) {\n        var requestOptions = {\n            method: \"SUBSCRIBE\",\n            path: path,\n            headers: headers\n        };\n        return new HttpSubscription(this.createXHR(this.baseURL, requestOptions), listeners);\n    };\n    HttpTransport.prototype.createXHR = function (baseURL, options) {\n        var XMLHttpRequest = window.XMLHttpRequest;\n        var xhr = new XMLHttpRequest();\n        var path = options.path.replace(/^\\/+/, \"\");\n        var endpoint = baseURL + \"/\" + path;\n        xhr.open(options.method.toUpperCase(), endpoint, true);\n        if (options.body) {\n            xhr.setRequestHeader(\"content-type\", \"application/json\");\n        }\n        if (options.jwt) {\n            xhr.setRequestHeader(\"authorization\", \"Bearer \" + options.jwt);\n        }\n        for (var key in options.headers) {\n            xhr.setRequestHeader(key, options.headers[key]);\n        }\n        return xhr;\n    };\n    return HttpTransport;\n}());\nexports.default = HttpTransport;\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar network_1 = __webpack_require__(0);\nvar SubscribeMessageType = 100;\nvar OpenMessageType = 101;\nvar EventMessageType = 102;\nvar UnsubscribeMessageType = 198;\nvar EosMessageType = 199;\nvar PingMessageType = 16;\nvar PongMessageType = 17;\nvar CloseMessageType = 99;\nvar WSReadyState;\n(function (WSReadyState) {\n    WSReadyState[WSReadyState[\"Connecting\"] = 0] = \"Connecting\";\n    WSReadyState[WSReadyState[\"Open\"] = 1] = \"Open\";\n    WSReadyState[WSReadyState[\"Closing\"] = 2] = \"Closing\";\n    WSReadyState[WSReadyState[\"Closed\"] = 3] = \"Closed\";\n})(WSReadyState = exports.WSReadyState || (exports.WSReadyState = {}));\n;\nvar WsSubscriptions = /** @class */ (function () {\n    function WsSubscriptions() {\n        this.subscriptions = {};\n    }\n    WsSubscriptions.prototype.add = function (subID, path, listeners, headers) {\n        this.subscriptions[subID] = {\n            path: path,\n            listeners: listeners,\n            headers: headers\n        };\n        return subID;\n    };\n    WsSubscriptions.prototype.has = function (subID) {\n        return this.subscriptions[subID] != undefined;\n    };\n    WsSubscriptions.prototype.isEmpty = function () {\n        return Object.keys(this.subscriptions).length === 0;\n    };\n    WsSubscriptions.prototype.remove = function (subID) {\n        return delete this.subscriptions[subID];\n    };\n    WsSubscriptions.prototype.get = function (subID) {\n        return this.subscriptions[subID];\n    };\n    WsSubscriptions.prototype.getAll = function () {\n        return this.subscriptions;\n    };\n    WsSubscriptions.prototype.getAllAsArray = function () {\n        var _this = this;\n        return Object.keys(this.subscriptions).map(function (subID) { return (__assign({ subID: parseInt(subID) }, _this.subscriptions[subID])); });\n    };\n    WsSubscriptions.prototype.removeAll = function () {\n        this.subscriptions = {};\n    };\n    return WsSubscriptions;\n}());\nvar WsSubscription = /** @class */ (function () {\n    function WsSubscription(wsTransport, subID) {\n        this.wsTransport = wsTransport;\n        this.subID = subID;\n    }\n    WsSubscription.prototype.unsubscribe = function () {\n        this.wsTransport.unsubscribe(this.subID);\n    };\n    return WsSubscription;\n}());\nvar pingIntervalMs = 30000;\nvar pingTimeoutMs = 10000;\nvar WebSocketTransport = /** @class */ (function () {\n    function WebSocketTransport(host) {\n        this.webSocketPath = '/ws';\n        this.forcedClose = false;\n        this.closedError = null;\n        this.baseURL = \"wss://\" + host + this.webSocketPath;\n        this.lastSubscriptionID = 0;\n        this.subscriptions = new WsSubscriptions();\n        this.pendingSubscriptions = new WsSubscriptions();\n        this.connect();\n    }\n    WebSocketTransport.prototype.connect = function () {\n        var _this = this;\n        this.close();\n        this.forcedClose = false;\n        this.closedError = null;\n        this.socket = new WebSocket(this.baseURL);\n        this.socket.addEventListener('open', function (event) {\n            var allPendingSubscriptions = _this.pendingSubscriptions.getAllAsArray();\n            // Re-subscribe old subscriptions for new connection\n            allPendingSubscriptions.forEach(function (subscription) {\n                var subID = subscription.subID, path = subscription.path, listeners = subscription.listeners, headers = subscription.headers;\n                _this.subscribePending(path, listeners, headers, subID);\n            });\n            _this.pendingSubscriptions.removeAll();\n            _this.pingInterval = setInterval(function () {\n                if (_this.pongTimeout) {\n                    return;\n                }\n                var now = new Date().getTime();\n                if (pingTimeoutMs > (now - _this.lastMessageReceivedTimestamp)) {\n                    return;\n                }\n                _this.sendMessage(_this.getMessage(PingMessageType, now));\n                _this.lastSentPingID = now;\n                _this.pongTimeout = setTimeout(function () {\n                    var now = new Date().getTime();\n                    if (pingTimeoutMs > (now - _this.lastMessageReceivedTimestamp)) {\n                        _this.pongTimeout = null;\n                        return;\n                    }\n                    _this.close(new network_1.NetworkError(\"Pong response wasn't received until timeout.\"));\n                }, pingTimeoutMs);\n            }, pingIntervalMs);\n        });\n        this.socket.addEventListener('message', function (event) { return _this.receiveMessage(event); });\n        this.socket.addEventListener('error', function (event) {\n            _this.close(new network_1.NetworkError('Connection was lost.'));\n        });\n        this.socket.addEventListener('close', function (event) {\n            if (!_this.forcedClose) {\n                _this.tryReconnectIfNeeded();\n                return;\n            }\n            var callback = (_this.closedError) ?\n                function (subscription) { return subscription.listeners.onError(_this.closedError); } :\n                function (subscription) { return subscription.listeners.onEnd(null); };\n            var allSubscriptions = (_this.pendingSubscriptions.isEmpty() === false) ?\n                _this.pendingSubscriptions :\n                _this.subscriptions;\n            allSubscriptions\n                .getAllAsArray()\n                .forEach(callback);\n            allSubscriptions.removeAll();\n            if (_this.closedError) {\n                _this.tryReconnectIfNeeded();\n            }\n        });\n    };\n    WebSocketTransport.prototype.close = function (error) {\n        if (!(this.socket instanceof WebSocket)) {\n            return;\n        }\n        this.forcedClose = true;\n        this.closedError = error;\n        this.socket.close();\n        clearTimeout(this.pingInterval);\n        clearTimeout(this.pongTimeout);\n        delete this.pongTimeout;\n        this.lastSentPingID = null;\n    };\n    WebSocketTransport.prototype.tryReconnectIfNeeded = function () {\n        if (this.socket.readyState !== WSReadyState.Closed) {\n            return;\n        }\n        this.connect();\n    };\n    WebSocketTransport.prototype.subscribe = function (path, listeners, headers) {\n        // If connection was closed, try to reconnect\n        this.tryReconnectIfNeeded();\n        var subID = this.lastSubscriptionID++;\n        // Add subscription to pending if socket is not open\n        if (this.socket.readyState !== WSReadyState.Open) {\n            this.pendingSubscriptions.add(subID, path, listeners, headers);\n            return new WsSubscription(this, subID);\n        }\n        // Add or select subscription\n        this.subscriptions.add(subID, path, listeners, headers);\n        this.sendMessage(this.getMessage(SubscribeMessageType, subID, path, headers));\n        return new WsSubscription(this, subID);\n    };\n    WebSocketTransport.prototype.subscribePending = function (path, listeners, headers, subID) {\n        // Add or select subscription\n        this.subscriptions.add(subID, path, listeners, headers);\n        this.sendMessage(this.getMessage(SubscribeMessageType, subID, path, headers));\n    };\n    WebSocketTransport.prototype.unsubscribe = function (subID) {\n        this.sendMessage(this.getMessage(UnsubscribeMessageType, subID));\n        this.subscriptions.get(subID).listeners.onEnd(null);\n        this.subscriptions.remove(subID);\n    };\n    WebSocketTransport.prototype.getMessage = function (messageType, id, path, headers) {\n        return [\n            messageType,\n            id,\n            path,\n            headers\n        ];\n    };\n    WebSocketTransport.prototype.sendMessage = function (message) {\n        if (this.socket.readyState !== WSReadyState.Open) {\n            return console.warn(\"Can't send in \\\"\" + WSReadyState[this.socket.readyState] + \"\\\" state\");\n        }\n        this.socket.send(JSON.stringify(message));\n    };\n    WebSocketTransport.prototype.subscription = function (subID) {\n        return this.subscriptions.get(subID);\n    };\n    WebSocketTransport.prototype.receiveMessage = function (event) {\n        this.lastMessageReceivedTimestamp = new Date().getTime();\n        // First try to parse event to JSON message.\n        var message;\n        try {\n            message = JSON.parse(event.data);\n        }\n        catch (err) {\n            this.close(new Error(\"Message is not valid JSON format. Getting \" + event.data));\n            return;\n        }\n        // Validate structure of message.\n        // Close connection if not valid.\n        var nonValidMessageError = this.validateMessage(message);\n        if (nonValidMessageError) {\n            this.close(new Error(nonValidMessageError.message));\n            return;\n        }\n        var messageType = message.shift();\n        // Try to handle connection level messages first\n        switch (messageType) {\n            case PongMessageType:\n                this.onPongMessage(message);\n                return;\n            case PingMessageType:\n                this.onPingMessage(message);\n                return;\n            case CloseMessageType:\n                this.onCloseMessage(message);\n                return;\n        }\n        var subID = message.shift();\n        var subscription = this.subscription(subID);\n        if (!subscription) {\n            this.close(new Error(\"Received message for non existing subscription id: \\\"\" + subID + \"\\\"\"));\n            return;\n        }\n        var listeners = subscription.listeners;\n        // Handle subscription level messages. \n        switch (messageType) {\n            case OpenMessageType:\n                this.onOpenMessage(message, subID, listeners);\n                break;\n            case EventMessageType:\n                this.onEventMessage(message, listeners);\n                break;\n            case EosMessageType:\n                this.onEOSMessage(message, subID, listeners);\n                break;\n            default:\n                this.close(new Error('Received non existing type of message.'));\n        }\n    };\n    /**\n    * Check if a single subscription message is in the right format.\n    * @param message The message to check.\n    * @returns null or error if the message is wrong.\n    */\n    WebSocketTransport.prototype.validateMessage = function (message) {\n        if (!Array.isArray(message)) {\n            return new Error(\"Message is expected to be an array. Getting: \" + JSON.stringify(message));\n        }\n        if (message.length < 1) {\n            return new Error(\"Message is empty array: \" + JSON.stringify(message));\n        }\n        return null;\n    };\n    WebSocketTransport.prototype.onOpenMessage = function (message, subID, subscriptionListeners) {\n        subscriptionListeners.onOpen(message[1]);\n    };\n    WebSocketTransport.prototype.onEventMessage = function (eventMessage, subscriptionListeners) {\n        if (eventMessage.length !== 3) {\n            return new Error('Event message has ' + eventMessage.length + ' elements (expected 4)');\n        }\n        var eventId = eventMessage[0], headers = eventMessage[1], body = eventMessage[2];\n        if (typeof eventId !== 'string') {\n            return new Error(\"Invalid event ID in message: \" + JSON.stringify(eventMessage));\n        }\n        if (typeof headers !== 'object' || Array.isArray(headers)) {\n            return new Error(\"Invalid event headers in message: \" + JSON.stringify(eventMessage));\n        }\n        subscriptionListeners.onEvent({ eventId: eventId, headers: headers, body: body });\n    };\n    WebSocketTransport.prototype.onEOSMessage = function (eosMessage, subID, subscriptionListeners) {\n        this.subscriptions.remove(subID);\n        if (eosMessage.length !== 3) {\n            return subscriptionListeners.onError(new Error(\"EOS message has \" + eosMessage.length + \" elements (expected 4)\"));\n        }\n        var statusCode = eosMessage[0], headers = eosMessage[1], body = eosMessage[2];\n        if (typeof statusCode !== 'number') {\n            return subscriptionListeners.onError(new Error('Invalid EOS Status Code'));\n        }\n        if (typeof headers !== 'object' || Array.isArray(headers)) {\n            return subscriptionListeners.onError(new Error('Invalid EOS ElementsHeaders'));\n        }\n        if (statusCode === 204) {\n            return subscriptionListeners.onEnd(null);\n        }\n        return subscriptionListeners.onError(new network_1.ErrorResponse(statusCode, headers, body));\n    };\n    WebSocketTransport.prototype.onCloseMessage = function (closeMessage) {\n        var statusCode = closeMessage[0], headers = closeMessage[1], body = closeMessage[2];\n        if (typeof statusCode !== 'number') {\n            return this.close(new Error('Close message: Invalid EOS Status Code'));\n        }\n        if (typeof headers !== 'object' || Array.isArray(headers)) {\n            return this.close(new Error('Close message: Invalid EOS ElementsHeaders'));\n        }\n        this.close();\n    };\n    WebSocketTransport.prototype.onPongMessage = function (message) {\n        var receviedPongID = message[0];\n        if (this.lastSentPingID !== receviedPongID) {\n            // Close with protocol error status code\n            this.close(new network_1.NetworkError(\"Didn't received pong with proper ID\"));\n        }\n        clearTimeout(this.pongTimeout);\n        delete this.pongTimeout;\n        this.lastSentPingID = null;\n    };\n    WebSocketTransport.prototype.onPingMessage = function (message) {\n        var receviedPingID = message[0];\n        this.sendMessage(this.getMessage(PongMessageType, receviedPingID));\n    };\n    return WebSocketTransport;\n}());\nexports.default = WebSocketTransport;\n\n\n/***/ })\n/******/ ]);\n});","export function parseResponse(promise) {\n  return new Promise((resolve, reject) => {\n    promise.then(response => {\n      try {\n        resolve(JSON.parse(response));\n      } catch (err) {\n        reject(err);\n      }\n    }).catch(reject);\n  });\n}\n\nexport function urlEncode(data) {\n  return Object.keys(data)\n    .filter(key => data[key] !== undefined)\n    .map(key => `${ key }=${ encodeURIComponent(data[key]) }`)\n    .join(\"&\");\n}\n\nexport function queryString(data) {\n  const encodedData = urlEncode(data);\n  return encodedData ? `?${ encodedData }` : \"\";\n}\n\nexport function unixTimeNow() {\n  return Math.floor(Date.now() / 1000);\n}\n","import { parseResponse, queryString } from \"./utils\";\n\nexport default class Feed {\n  constructor({ instance, feedId, readTokenProvider }) {\n    this.instance = instance;\n    this.feedId = feedId;\n    this.readTokenProvider = readTokenProvider;\n  }\n\n  subscribe({ onOpen, onItem, ...options } = {}) {\n    if (onOpen && typeof onOpen !== \"function\") {\n      throw new TypeError(`onOpen must be a function, got ${ onOpen }`);\n    }\n    if (typeof onItem !== \"function\") {\n      throw new TypeError(\"Must provide an `onItem` callback\");\n    }\n    const onEvent = event => {\n      if (event.body.type === 0 && onOpen) {\n        onOpen(event.body.data);\n      } else if (event.body.type === 1 && onItem) {\n        onItem(event.body.data);\n      } else if (event.body.type > 1) {\n        throw new TypeError(`Unsupported event type '${\n          event.body.type\n        }'`);\n      }\n    };\n    return this.instance.subscribeResuming({\n      ...options,\n      // Mapping our itemId to platform library eventId\n      initialEventId: options.lastItemId,\n      path: `feeds/${ this.feedId }/items` + queryString({\n        previous_items: options.previousItems,\n      }),\n      tokenProvider: this.readTokenProvider,\n      listeners: {\n        onEvent,\n        onSubscribe: options.onSubscribe,\n        onRetrying: options.onRetrying,\n        onError: options.onError,\n        onEnd: options.onEnd,\n      }\n    });\n  }\n\n  paginate({ cursor, limit = 50 } = {}) {\n    return parseResponse(this.instance.request({\n      method: \"GET\",\n      path: `feeds/${ this.feedId }/items` + queryString({\n        cursor,\n        limit,\n      }),\n    }, this.readTokenProvider));\n  }\n}\n","export const cacheExpiryTolerance = 10 * 60; // 10 minutes (in seconds)\nexport const feedIdRegex = /^[a-zA-Z0-9-]+$/;\nexport const tokenProviderTimeout = 30 * 1000; // 30 seconds (in ms)\n","import {\n  cacheExpiryTolerance,\n  tokenProviderTimeout,\n} from \"./constants\";\n\nimport { urlEncode, unixTimeNow } from \"./utils\";\n\nexport default class TokenProvider {\n  constructor({ authEndpoint, authData }) {\n    this.authEndpoint = authEndpoint;\n    this.authData = authData;\n  }\n\n  fetchToken() {\n    if (this.cacheIsStale) {\n      return this.makeAuthRequest().then(responseBody => {\n        this.cache(responseBody.access_token, responseBody.expires_in);\n        return this.cachedToken;\n      });\n    }\n    return Promise.resolve(this.cachedToken);\n  }\n\n  get cacheIsStale() {\n    return !this.cachedToken || unixTimeNow() > this.cacheValidUntil;\n  }\n\n  cache(token, expiresIn) {\n    this.cachedToken = token;\n    this.cacheValidUntil = unixTimeNow() + expiresIn - cacheExpiryTolerance;\n  }\n\n  makeAuthRequest() {\n    if (typeof this.authEndpoint != \"string\") {\n      throw new TypeError(`Expected authEndpoint to be a string, but got ${this.authEndpoint}. Please provide an authEndpoint to access private feeds. (See http://docs.pusher.com/feeds/concepts/private-feeds/)`);\n    }\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open(\"POST\", this.authEndpoint);\n      xhr.timeout = tokenProviderTimeout;\n      xhr.onload = () => {\n        if (xhr.status === 200) {\n          resolve(JSON.parse(xhr.responseText));\n        } else {\n          reject(new Error(`Couldn't fetch token from ${\n            this.authEndpoint\n          }; got ${ xhr.status } ${ xhr.statusText }.`));\n        }\n      };\n      xhr.ontimeout = () => {\n        reject(new Error(`Request timed out while fetching token from ${\n          this.authEndpoint\n        }`));\n      };\n      xhr.setRequestHeader(\"content-type\", \"application/x-www-form-urlencoded\");\n      xhr.send(urlEncode({\n        ...this.authData,\n        grant_type: \"client_credentials\",\n      }));\n    });\n  }\n}\n","import PusherPlatform from \"pusher-platform\";\nimport Feed from \"./feed\";\nimport TokenProvider from \"./token-provider\";\nimport { feedIdRegex } from \"./constants\";\nimport { parseResponse, queryString } from \"./utils\";\n\nexport default class Feeds {\n  constructor({\n    authData = {},\n    authEndpoint,\n    host,\n    instanceLocator,\n    logLevel,\n    logger,\n  } = {}) {\n    this.authData = authData;\n    this.authEndpoint = authEndpoint;\n    this.listTokenProvider = new TokenProvider({\n      authEndpoint: this.authEndpoint,\n      authData: {\n        ...this.authData,\n        path: \"feeds\",\n        action: \"READ\",\n      }\n    });\n    this.firehoseTokenProvider = new TokenProvider({\n      authEndpoint: this.authEndpoint,\n      authData: {\n        ...this.authData,\n        path: \"firehose/items\",\n        action: \"READ\",\n      }\n    });\n    if (!logger && logLevel) {\n      logger = new PusherPlatform.ConsoleLogger(logLevel);\n    }\n    this.instance = new PusherPlatform.Instance({\n      host,\n      locator: instanceLocator,\n      logger,\n      serviceName: \"feeds\",\n      serviceVersion: \"v1\",\n    });\n  }\n\n  list({ prefix, limit } = {}) {\n    return parseResponse(this.instance.request({\n      method: \"GET\",\n      path: \"feeds\" + queryString({ prefix, limit }),\n    }, this.listTokenProvider));\n  }\n\n  feed(feedId) {\n    if (!feedId || !feedId.match(feedIdRegex)) {\n      throw new TypeError(`Invalid feedId: ${ feedId }`);\n    }\n    const readTokenProvider =\n      feedId.startsWith(\"private-\") ? new TokenProvider({\n        authEndpoint: this.authEndpoint,\n        authData: {\n          ...this.authData,\n          path: `feeds/${ feedId }/items`,\n          action: \"READ\",\n        }\n      }) : null;\n    return new Feed({\n      instance: this.instance,\n      feedId,\n      readTokenProvider,\n    });\n  }\n\n  firehose({ onPublish, onSubscribe, onUnsubscribe, ...options } = {}) {\n    validateFirehoseCallbacks({ onPublish, onSubscribe, onUnsubscribe });\n    const onEvent = event => {\n      if (event.body.type === 0 && onPublish) {\n        onPublish(event.body.data);\n      } else if (event.body.type === 1 && onSubscribe) {\n        onSubscribe(event.body.data);\n      } else if (event.body.type === 2 && onUnsubscribe) {\n        onUnsubscribe(event.body.data);\n      } else if (event.body.type > 2) {\n        throw new TypeError(`Unsupported firehose event type '${\n          event.body.type\n        }'`);\n      }\n    };\n    return this.instance.subscribeNonResuming({\n      ...options,\n      path: \"firehose/items\",\n      tokenProvider: this.firehoseTokenProvider,\n      listeners: {\n        onEvent,\n        onOpen: options.onOpen,\n        onSubscribe: options.onSubscribe,\n        onError: options.onError,\n        onEnd: options.onEnd,\n      }\n    });\n  }\n}\n\nfunction validateFirehoseCallbacks(callbacks) {\n  const defined = Object.keys(callbacks)\n    .filter(k => callbacks[k] !== undefined)\n    .map(k => ({ name: k, callback: callbacks[k] }));\n  defined.forEach(({ name, callback }) => {\n    if (typeof callback !== \"function\") {\n      throw new TypeError(`${ name } must be a function, got ${ callback }`);\n    }\n  });\n  if (defined.length === 0) {\n    throw new TypeError(\"Must provide at least one of onPublish, onSubscribe, or onUnsubscribe\");\n  }\n}\n"],"names":["webpackUniversalModuleDefinition","root","factory","module","this","modules","installedModules","__webpack_require__","moduleId","exports","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","responseToHeadersObject","headerStr","headers","headerPairs","split","length","headerPair","index","indexOf","key","substring","val","ErrorResponse","statusCode","info","fromXHR","xhr","status","getAllResponseHeaders","responseText","NetworkError","error","XhrReadyState","LogLevel","ConsoleLogger","threshold","log","logFunction","level","message","loggerSignature","group","groupEnd","verbose","console","VERBOSE","debug","DEBUG","INFO","warn","WARNING","ERROR","EmptyLogger","network_1","createRetryStrategyOptionsOrDefault","options","initialTimeoutMillis","maxTimeoutMillis","limit","undefined","increaseTimeout","currentTimeout","Retry","waitTimeMillis","DoNotRetry","requestMethodIsSafe","method","toUpperCase","RetryResolution","logger","retryUnsafeRequests","currentRetryCount","increaseTimeoutFunction","currentBackoffMillis","attemptRetry","constructor","parseInt","shouldSafeRetry","calulateMillisToRetry","retrying_subscription_1","resuming_subscription_1","request_1","logger_1","subscription_1","token_providing_subscription_1","transports_1","subscribe_strategy_1","websocket_1","http_1","BaseClient","host","replace","websocketTransport","default","httpTransport","request","tokenProvider","tokenParams","_this","fetchToken","then","token","executeNetworkRequest","catch","subscribeResuming","path","listeners","retryStrategyOptions","initialEventId","replaceMissingListenersWithNoOps","subscribeStrategyListeners","subscribeStrategyListenersFromSubscriptionListeners","subscriptionStrategy","createResumingStrategy","createTokenProvidingStrategy","createTransportStrategy","opened","onOpen","onSubscribe","onRetrying","onError","onEvent","onEnd","subscribeNonResuming","createRetryingStrategy","PCancelable","createXhr","cancelablePromise","onCancel","resolve","reject","abort","onreadystatechange","readyState","response","send","JSON","stringify","body","retry_strategy_1","retryOptions","nextSubscribeStrategy","retryResolution","ResumingSubscription","onTransition","newState","state","unsubscribe","OpeningSubscriptionState","lastEventId","underlyingSubscription","OpenSubscriptionState","ResumingSubscriptionState","event","eventId","EndedSubscriptionState","EndingSubscriptionState","executeSubscriptionOnce","resolveError","errorResolution","timeout","window","setTimeout","FailedSubscriptionState","executeNextSubscribeStrategy","clearTimeout","Error","RetryingSubscription","RetryingSubscriptionState","TokenProvidingSubscription","TokenProvidingState","isTokenExpiredError","fetchTokenAndExecuteSubscription","tokenPromise","putTokenIntoHeader","clearToken","cancel","transport","strategy","subscribe","base_client_1","HOST_BASE","Instance","locator","serviceName","serviceVersion","splitLocator","platformVersion","cluster","id","client","encrypted","absPath","tokenProviderToUse","relativePath","CancelError","fn","args","slice","apply","arguments","unshift","executor","_pending","_canceled","_promise","Promise","_reject","_cancel","err","canceled","setPrototypeOf","instance_1","subListeners","noop","arg","HttpTransportState","HttpSubscription","UNOPENED","lastNewlineIndex","gotEOS","UNSENT","OPENED","HEADERS_RECEIVED","assertStateIsIn","OPENING","LOADING","onLoading","DONE","onDone","ENDED","OPEN","ENDING","onChunk","newlineIndex","lastIndexOf","rawEvents","_i","rawEvents_1","rawEvent","data","parse","onMessage","validStates","stateIsValid","some","validState","expectedStates","map","join","actualState","verifyMessage","onEventMessage","onEOSMessage","eventMessage","_","Array","isArray","eosMessage","HttpTransport","baseURL","requestOptions","createXHR","XMLHttpRequest","endpoint","open","setRequestHeader","jwt","__assign","assign","t","SubscribeMessageType","OpenMessageType","EventMessageType","UnsubscribeMessageType","EosMessageType","PingMessageType","PongMessageType","CloseMessageType","WSReadyState","WsSubscriptions","subscriptions","add","subID","has","isEmpty","keys","remove","getAll","getAllAsArray","removeAll","WsSubscription","wsTransport","pingIntervalMs","pingTimeoutMs","WebSocketTransport","webSocketPath","forcedClose","closedError","lastSubscriptionID","pendingSubscriptions","connect","close","socket","WebSocket","addEventListener","allPendingSubscriptions","forEach","subscription","subscribePending","pingInterval","setInterval","pongTimeout","now","Date","getTime","lastMessageReceivedTimestamp","sendMessage","getMessage","lastSentPingID","receiveMessage","tryReconnectIfNeeded","callback","allSubscriptions","Closed","Open","messageType","nonValidMessageError","validateMessage","shift","onPongMessage","onPingMessage","onCloseMessage","onOpenMessage","subscriptionListeners","closeMessage","receviedPongID","receviedPingID","parseResponse","promise","urlEncode","filter","encodeURIComponent","queryString","encodedData","unixTimeNow","Math","floor","Feed","instance","feedId","readTokenProvider","onItem","TypeError","type","lastItemId","previousItems","cursor","cacheExpiryTolerance","feedIdRegex","tokenProviderTimeout","TokenProvider","authEndpoint","authData","cacheIsStale","makeAuthRequest","cache","responseBody","access_token","expires_in","cachedToken","expiresIn","cacheValidUntil","onload","statusText","ontimeout","Feeds","instanceLocator","logLevel","listTokenProvider","firehoseTokenProvider","PusherPlatform","prefix","match","startsWith","onPublish","onUnsubscribe","validateFirehoseCallbacks","callbacks","defined","k"],"mappings":"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"}